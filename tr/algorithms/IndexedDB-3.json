{
  "spec": {
    "title": "Indexed Database API 3.0",
    "url": "https://www.w3.org/TR/IndexedDB-3/"
  },
  "algorithms": [
    {
      "name": "create a sorted name list",
      "href": "https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"create-a-sorted-name-list\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">create a sorted name list</dfn> from a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list\">list</a> <var>names</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>sorted</var> be <var>names</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-sort-in-ascending-order\" id=\"ref-for-list-sort-in-ascending-order\">sorted in ascending order</a> with the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than\">code unit less than</a> algorithm.</p>"
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist\">DOMStringList</a></code> associated with <var>sorted</var>.</p>"
        }
      ]
    },
    {
      "name": "compare two keys",
      "href": "https://www.w3.org/TR/IndexedDB-3/#compare-two-keys",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"compare-two-keys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">compare two keys</dfn> <var>a</var> and <var>b</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>ta</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①\">type</a> of <var>a</var>.</p>"
        },
        {
          "html": "<p>Let <var>tb</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type②\">type</a> of <var>b</var>.</p>"
        },
        {
          "html": "If <var>ta</var> does not equal <var>tb</var>, then run these steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>ta</var> is <em>array</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>array</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>binary</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>binary</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>string</em>, then return 1.</p>"
            },
            {
              "html": "<p>If <var>tb</var> is <em>string</em>, then return -1.</p>"
            },
            {
              "html": "<p>If <var>ta</var> is <em>date</em>, then return 1.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert\">Assert</a>: <var>tb</var> is <em>date</em>.</p>"
            },
            {
              "html": "<p>Return -1.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>va</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①\">value</a> of <var>a</var>.</p>"
        },
        {
          "html": "<p>Let <var>vb</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value②\">value</a> of <var>b</var>.</p>"
        },
        {
          "html": "Switch on <var>ta</var>:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "number",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is greater than <var>vb</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var> is less than <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "date",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is greater than <var>vb</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var> is less than <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "string",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than①\">code unit less than</a> <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>If <var>vb</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#code-unit-less-than\" id=\"ref-for-code-unit-less-than②\">code unit less than</a> <var>va</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "binary",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>va</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-less-than\" id=\"ref-for-byte-less-than\">byte less than</a> <var>vb</var>, then return -1.</p>"
                    },
                    {
                      "html": "<p>If <var>vb</var> is <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-less-than\" id=\"ref-for-byte-less-than①\">byte less than</a> <var>va</var>, then return 1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                },
                {
                  "case": "array",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>length</var> be the lesser of <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size\">size</a> and <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size①\">size</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>i</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>i</var> is less than <var>length</var>, then:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>c</var> be the result of recursively <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#compare-two-keys\" id=\"ref-for-compare-two-keys\">comparing two keys</a> with <var>va</var>[<var>i</var>] and <var>vb</var>[<var>i</var>].</p>"
                        },
                        {
                          "html": "<p>If <var>c</var> is not 0, return <var>c</var>.</p>"
                        },
                        {
                          "html": "<p>Increase <var>i</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>If <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size②\">size</a> is greater than <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size③\">size</a>, then return 1.</p>"
                    },
                    {
                      "html": "<p>If <var>va</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size④\">size</a> is less than <var>vb</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑤\">size</a>, then return -1.</p>"
                    },
                    {
                      "html": "<p>Return 0.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "transaction/lifetime",
      "href": "https://www.w3.org/TR/IndexedDB-3/#transaction-lifetime",
      "html": "The <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"transaction-lifetime\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">lifetime</dfn> of a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept②⑨\">transaction</a> is as follows:",
      "rationale": "/queue a( \\w+)? task/i",
      "steps": [
        {
          "html": "<p>A transaction is <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"transaction-created\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">created</dfn> with a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope④\">scope</a> and a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-mode\" id=\"ref-for-transaction-mode④\">mode</a>. When a transaction is created its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state\">state</a> is initially <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active\">active</a>.</p>"
        },
        {
          "html": "<p>When an implementation is able to enforce the constraints for the\ntransaction’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope⑤\">scope</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-mode\" id=\"ref-for-transaction-mode⑤\">mode</a>,\ndefined <a href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scheduling\">below</a>, the implementation must <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task\">queue a task</a> to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"start|started\" data-noexport=\"\" id=\"transaction-start\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">start</dfn> the\ntransaction asynchronously.</p>\n      <p>Once the transaction has been <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-start\" id=\"ref-for-transaction-start②\">started</a> the\nimplementation can begin executing the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑦\">requests</a> placed\nagainst the transaction. Requests must be executed in the order in\nwhich they were made against the transaction. Likewise, their\nresults must be returned in the order the requests were placed\nagainst a specific transaction. There is no guarantee about the\norder that results from requests in different transactions are\nreturned.</p>"
        },
        {
          "html": "<p>When each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑧\">request</a> associated with a transaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed\">processed</a>,\na <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success①\">success</a></code> or <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error\">error</a></code> <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event\" id=\"ref-for-concept-event\">event</a> will be\nfired. While the event is being <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch\">dispatched</a>, the transaction <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①\">active</a>, allowing\nadditional requests to be made against the transaction. Once the\nevent dispatch is complete, the transaction’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive\">inactive</a> again.</p>"
        },
        {
          "html": "<p>A transaction can be <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"abort|aborting|aborted\" data-noexport=\"\" id=\"transaction-abort\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">aborted</dfn> at any time before it is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished\">finished</a>, even if the\ntransaction isn’t currently <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②\">active</a> or hasn’t yet <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-start\" id=\"ref-for-transaction-start③\">started</a>.</p>\n      <p>An explicit call to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-abort\" id=\"ref-for-dom-idbtransaction-abort\">abort()</a></code> will initiate an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort①\">abort</a>. An abort will also be initiated following a\nfailed request that is not handled by script.</p>\n      <p>When a transaction is aborted the implementation must undo (roll\nback) any changes that were made to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database①⑧\">database</a> during that\ntransaction. This includes both changes to the contents of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store②①\">object stores</a> as well as additions and removals of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store②②\">object stores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑨\">indexes</a>.</p>"
        },
        {
          "html": "<p>The implementation must attempt to <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-lt=\"commit|committed\" data-noexport=\"\" id=\"transaction-commit\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">commit</dfn> a transaction when all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request⑨\">requests</a> placed against the\ntransaction have completed and their returned results handled, no\nnew requests have been placed against the transaction, and the\ntransaction has not been <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort②\">aborted</a></p>\n      <p>An explicit call to <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-commit\" id=\"ref-for-dom-idbtransaction-commit\">commit()</a></code> will initiate a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-commit\" id=\"ref-for-transaction-commit④\">commit</a> without waiting for request results to be\nhandled by script.</p>\n      <p>When committing, the transaction <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing\">committing</a>. The implementation must atomically\nwrite any changes to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database①⑨\">database</a> made by requests placed\nagainst the transaction. That is, either all of the changes must\nbe written, or if an error occurs, such as a disk write error, the\nimplementation must not write any of the changes to the database,\nand the steps to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction\">abort a transaction</a> will be followed.</p>"
        },
        {
          "html": "<p>When a transaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-commit\" id=\"ref-for-transaction-commit⑤\">committed</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort③\">aborted</a>,\nits <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④\">state</a> is set to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①\">finished</a>.</p>"
        }
      ]
    },
    {
      "name": "cleanup Indexed Database transactions",
      "href": "https://www.w3.org/TR/IndexedDB-3/#cleanup-indexed-database-transactions",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-for=\"transaction\" data-dfn-type=\"dfn\" data-export=\"\" id=\"cleanup-indexed-database-transactions\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">cleanup Indexed Database transactions</dfn>, run the following steps.\nThey will return true if any transactions were cleaned up, or false otherwise.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If there are no <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept③①\">transactions</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop\">cleanup event loop</a> matching the current <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop①\">event loop</a>, return false.</p>"
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept③②\">transaction</a> <var>transaction</var> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop①\">cleanup event loop</a> matching the current <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop②\">event loop</a>:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑥\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive①\">inactive</a>.</p>"
            },
            {
              "html": "<p>Clear <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop②\">cleanup event loop</a>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return true.</p>"
        }
      ]
    },
    {
      "name": "convert a value to a key range",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-key-range\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a key range</dfn> with <var>value</var> and optional <var>null disallowed flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>value</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range①⑦\">key range</a>, return <var>value</var>.</p>"
        },
        {
          "html": "<p>If <var>value</var> is undefined or is null, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException\">DOMException</a></code> if <var>null disallowed flag</var> is true, or return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#unbounded-key-range\" id=\"ref-for-unbounded-key-range①\">unbounded key range</a> otherwise.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①\">converting a value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range①⑧\">key range</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#containing-only\" id=\"ref-for-containing-only\">containing only</a> <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "generate a key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#generate-a-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"generate-a-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">generate a key</dfn> for an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store④①\">object store</a> <var>store</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>generator</var> be <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator④\">key generator</a>.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number⑨\">current number</a>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is greater than 2<sup>53</sup> (9007199254740992), then return failure.</p>"
        },
        {
          "html": "<p>Increase <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①⓪\">current number</a> by 1.</p>"
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "possibly update the key generator",
      "href": "https://www.w3.org/TR/IndexedDB-3/#possibly-update-the-key-generator",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"possibly-update-the-key-generator\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">possibly update the key generator</dfn> for an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store④②\">object store</a> <var>store</var> with <var>key</var>,\n  run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type③\">type</a> of <var>key</var> is not <em>number</em>, abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>value</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value③\">value</a> of <var>key</var>.</p>"
        },
        {
          "html": "<p>Set <var>value</var> to the minimum of <var>value</var> and 2<sup>53</sup> (9007199254740992).</p>"
        },
        {
          "html": "<p>Set <var>value</var> to the largest integer not greater than <var>value</var>.</p>"
        },
        {
          "html": "<p>Let <var>generator</var> be <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator⑥\">key generator</a>.</p>"
        },
        {
          "html": "<p>If <var>value</var> is greater than or equal to <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①①\">current number</a>,\n  then set <var>generator</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator-current-number\" id=\"ref-for-key-generator-current-number①②\">current number</a> to <var>value</var> + 1.</p>"
        }
      ]
    },
    {
      "name": "IDBRequest/result",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbrequest-result",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBRequest\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbrequest-result\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>result</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑤\">done flag</a> is false, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result③\">result</a>, or undefined if the request resulted in an error.</p>"
        }
      ]
    },
    {
      "name": "IDBRequest/error",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbrequest-error",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBRequest\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbrequest-error\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>error</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑥\">done flag</a> is false, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error③\">error</a>, or null if no error occurred.</p>"
        }
      ]
    },
    {
      "name": "fire a version change event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-a-version-change-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire a version change event</dfn> named <var>e</var> at <var>target</var> given <var>oldVersion</var> and <var>newVersion</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbversionchangeevent\" id=\"ref-for-idbversionchangeevent\">IDBVersionChangeEvent</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type\">type</a></code> attribute to <var>e</var>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable\">cancelable</a></code> attributes to false.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbversionchangeevent-oldversion\" id=\"ref-for-dom-idbversionchangeevent-oldversion①\">oldVersion</a></code> attribute to <var>oldVersion</var>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbversionchangeevent-newversion\" id=\"ref-for-dom-idbversionchangeevent-newversion①\">newVersion</a></code> attribute to <var>newVersion</var>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be false.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch①\">Dispatch</a> <var>event</var> at <var>target</var> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "<p>Return <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/open(name, version)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-open",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"open(name, version)|open(name)\" id=\"dom-idbfactory-open\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>open(<var>name</var>, <var>version</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>version</var> is 0 (zero), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①①\">open request</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#open-a-database-connection\" id=\"ref-for-open-a-database-connection①\">opening a database connection</a>, with <var>storageKey</var>, <var>name</var>, <var>version</var> if given and undefined\notherwise, and <var>request</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag①\">processed flag</a> to true.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "If <var>result</var> is an error, then:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result④\">result</a> to undefined.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error④\">error</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑧\">done flag</a> to true.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error③\">error</a></code> at <var>request</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles①\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable①\">cancelable</a></code> attributes initialized to true.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑤\">result</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag⑨\">done flag</a> to true.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire①\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success④\">success</a></code> at <var>request</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbopendbrequest\" id=\"ref-for-idbopendbrequest②\">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/deleteDatabase(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-deletedatabase",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-deletedatabase\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteDatabase(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object①\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key①\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror①\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①②\">open request</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel①\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-a-database\" id=\"ref-for-delete-a-database\">deleting a database</a>, with <var>storageKey</var>, <var>name</var>, and <var>request</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag②\">processed flag</a> to true.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task②\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>result</var> is an error,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑤\">error</a> to <var>result</var>,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⓪\">done flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire②\">fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error④\">error</a></code> at <var>request</var> with\nits <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles②\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable②\">cancelable</a></code> attributes initialized to true.</p>"
                },
                {
                  "html": "<p>Otherwise,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑥\">result</a> to undefined,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①①\">done flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-success\" id=\"ref-for-eventdef-idbrequest-success⑤\">success</a></code> at <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request②⑥\">request</a> with <var>result</var> and\nnull.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbopendbrequest\" id=\"ref-for-idbopendbrequest③\">IDBOpenDBRequest</a></code> object for <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/databases()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-databases",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-databases\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>databases()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>environment</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object\" id=\"ref-for-relevant-settings-object②\">relevant settings object</a>.</p>"
        },
        {
          "html": "<p>Let <var>storageKey</var> be the result of running <a data-link-type=\"dfn\" href=\"https://storage.spec.whatwg.org/#obtain-a-storage-key\" id=\"ref-for-obtain-a-storage-key②\">obtain a storage key</a> given <var>environment</var>.\nIf failure is returned, then return <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-promise-rejected-with\" id=\"ref-for-a-promise-rejected-with\">a promise rejected with</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#securityerror\" id=\"ref-for-securityerror②\">SecurityError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③\">DOMException</a></code></p>"
        },
        {
          "html": "<p>Let <var>p</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#a-new-promise\" id=\"ref-for-a-new-promise\">a new promise</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel②\">in parallel</a>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>databases</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set①\">set</a> of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⓪\">databases</a> in <var>storageKey</var>.\nIf this cannot be determined for any reason, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#reject\" id=\"ref-for-reject\">reject</a> <var>p</var> with\nan appropriate error (e.g. an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror①\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④\">DOMException</a></code>)\nand terminate these steps.</p>"
            },
            {
              "html": "<p>Let <var>result</var> be a new <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list②\">list</a>.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate\">For each</a> <var>db</var> of <var>databases</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>info</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dictdef-idbdatabaseinfo\" id=\"ref-for-dictdef-idbdatabaseinfo①\">IDBDatabaseInfo</a></code> dictionary.</p>"
                },
                {
                  "html": "<p>Set <var>info</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabaseinfo-name\" id=\"ref-for-dom-idbdatabaseinfo-name\">name</a></code> dictionary member to <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name①\">name</a>.</p>"
                },
                {
                  "html": "<p>Set <var>info</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabaseinfo-version\" id=\"ref-for-dom-idbdatabaseinfo-version\">version</a></code> dictionary member to <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version⑤\">version</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append\">Append</a> <var>info</var> to <var>result</var>.</p>"
                }
              ]
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#resolve\" id=\"ref-for-resolve\">Resolve</a> <var>p</var> with <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>p</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBFactory/cmp(first, second)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbfactory-cmp",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBFactory\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbfactory-cmp\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>cmp(<var>first</var>, <var>second</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>a</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key②\">converting a value to a key</a> with <var>first</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>a</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror④\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>b</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key③\">converting a value to a key</a> with <var>second</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>b</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑤\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return the results of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#compare-two-keys\" id=\"ref-for-compare-two-keys④\">comparing two keys</a> with <var>a</var> and <var>b</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/objectStoreNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-objectstorenames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbdatabase-objectstorenames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStoreNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list③\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤④\">object stores</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set\">object store set</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist②\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/createObjectStore(name, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-createobjectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"createObjectStore(name, options)|createObjectStore(name)\" id=\"dom-idbdatabase-createobjectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>createObjectStore(<var>name</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>database</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④\">this</a>’s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⑦\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction\">upgrade transaction</a> if it is not null, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑦\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⓪\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑦\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑤\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>keyPath</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstoreparameters-keypath\" id=\"ref-for-dom-idbobjectstoreparameters-keypath\">keyPath</a></code> member if it is not undefined or null, or null otherwise.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is not null and is not a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#valid-key-path\" id=\"ref-for-valid-key-path\">valid key path</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#syntaxerror\" id=\"ref-for-syntaxerror①\">SyntaxError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑦\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name④\">named</a> <var>name</var> already\nexists in <var>database</var> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror②\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>autoIncrement</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstoreparameters-autoincrement\" id=\"ref-for-dom-idbobjectstoreparameters-autoincrement\">autoIncrement</a></code> member.</p>"
        },
        {
          "html": "<p>If <var>autoIncrement</var> is true and <var>keyPath</var> is an empty string or any\nsequence (empty or otherwise), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①③\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror①\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑧\">object store</a> in <var>database</var>. Set the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑤⑨\">object store</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name⑤\">name</a> to <var>name</var>. If <var>autoIncrement</var> is true, then the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥⓪\">object store</a> uses a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①③\">key generator</a>. If <var>keyPath</var> is\nnot null, set the created <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥①\">object store</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⓪\">key path</a> to <var>keyPath</var>.</p>"
        },
        {
          "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle⑦\">object store handle</a> associated with <var>store</var> and <var>transaction</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/deleteObjectStore(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-deleteobjectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbdatabase-deleteobjectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteObjectStore(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>database</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤\">this</a>’s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database④⑨\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction①\">upgrade transaction</a> if it is not null, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑥\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑧\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑥\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑤\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑥⑦\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name⑥\">named</a> <var>name</var> in <var>database</var>,\nor <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror①\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑧\">DOMException</a></code> if none.</p>"
        },
        {
          "html": "<p>Remove <var>store</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set①\">object store set</a>.</p>"
        },
        {
          "html": "<p>If there is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle⑧\">object store handle</a> associated with <var>store</var> and <var>transaction</var>, remove all entries from its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set\">index set</a>.</p>"
        },
        {
          "html": "<p>Destroy <var>store</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/transaction(storeNames, mode, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-transaction",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"transaction(storeNames, mode, options)|transaction(storeNames, mode)|transaction(storeNames)\" id=\"dom-idbdatabase-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>transaction(<var>storeNames</var>, <var>mode</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-live\" id=\"ref-for-transaction-live①①\">live</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction②⑤\">upgrade transaction</a> is associated with the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑥\">connection</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑦\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException②⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag③\">close pending flag</a> is true, then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑧\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⓪\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>scope</var> be the set of unique strings in <var>storeNames</var> if it is a\nsequence, or a set containing one string equal to <var>storeNames</var> otherwise.</p>"
        },
        {
          "html": "<p>If any string in <var>scope</var> is not the name of an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦⓪\">object store</a> in the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑦\">connected</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤①\">database</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⑨\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror②\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>scope</var> is empty, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⓪\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror②\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>mode</var> is not \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionmode-readonly\" id=\"ref-for-dom-idbtransactionmode-readonly④\">readonly</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionmode-readwrite\" id=\"ref-for-dom-idbtransactionmode-readwrite④\">readwrite</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②①\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror①\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be a newly <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑥\">created</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept④⑧\">transaction</a> with this <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑧\">connection</a>, <var>mode</var>, <var>options</var>’ <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbtransactionoptions-durability\" id=\"ref-for-dom-idbtransactionoptions-durability②\">durability</a></code> member, and the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦①\">object stores</a> named in <var>scope</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-cleanup-event-loop\" id=\"ref-for-transaction-cleanup-event-loop③\">cleanup event loop</a> to the\ncurrent <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop\" id=\"ref-for-event-loop⑤\">event loop</a>.</p>"
        },
        {
          "html": "<p>Return an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbtransaction\" id=\"ref-for-idbtransaction③\">IDBTransaction</a></code> object representing <var>transaction</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBDatabase/close()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbdatabase-close",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBDatabase\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbdatabase-close\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>close()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection\" id=\"ref-for-close-a-database-connection③\">close a database connection</a> with this <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection④⑨\">connection</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore name setter",
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-name\" id=\"ref-for-dom-idbobjectstore-name③\">name</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>name</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#the-given-value\" id=\"ref-for-the-given-value\">the given value</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store②\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①②\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction②⑧\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②③\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①③\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑨\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑦\">active</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①④\">name</a> is equal to <var>name</var>,\nterminate these steps.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑦④\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑤\">named</a> <var>name</var> already exists in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤②\">database</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑤\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror③\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException③⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑥\">name</a> to <var>name</var>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-name\" id=\"ref-for-object-store-handle-name\">name</a> to <var>name</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/indexNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-indexnames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbobjectstore-indexnames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>indexNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list④\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept①⑨\">indexes</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set①\">index set</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist④\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list①\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "add or put",
      "href": "https://www.w3.org/TR/IndexedDB-3/#add-or-put",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"add-or-put\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">add or put</dfn> with <var>handle</var>, <var>value</var>, <var>key</var>, and <var>no-overwrite flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction③\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑤\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①④\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⓪\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active⑨\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑤\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑤\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑧\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror②\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys②\">in-line keys</a> and <var>key</var> was given, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw②⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑦\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-out-of-line-keys\" id=\"ref-for-object-store-out-of-line-keys①\">out-of-line keys</a> and has no <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑥\">key generator</a> and <var>key</var> was not given, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⓪\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑧\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "If <var>key</var> was given, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key④\">converting a value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror⑨\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑦\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>targetRealm</var> be a user-agent defined <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm\" id=\"ref-for-realm\">Realm</a>.</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clone\" id=\"ref-for-clone\">clone</a> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "If <var>store</var> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys③\">in-line keys</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>kpk</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path①\">extracting a key from a value using a key path</a> with <var>clone</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①③\">key path</a>. Rethrow any\nexceptions.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⓪\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑧\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is not failure, let <var>key</var> be <var>kpk</var>.</p>"
            },
            {
              "html": "Otherwise (<var>kpk</var> is failure):",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>store</var> does not have a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑦\">key generator</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③③\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①①\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException④⑨\">DOMException</a></code>.</p>"
                },
                {
                  "html": "<p>If <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#check-that-a-key-could-be-injected-into-a-value\" id=\"ref-for-check-that-a-key-could-be-injected-into-a-value\">check that a key could be injected into a value</a> with <var>clone</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①④\">key path</a> return\nfalse, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①②\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⓪\">DOMException</a></code>.</p>"
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store\" id=\"ref-for-store-a-record-into-an-object-store\">store a record into an object store</a> with <var>store</var>, <var>clone</var>, <var>key</var>, and <var>no-overwrite flag</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑦\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①\">asynchronously execute a request</a> with <var>handle</var> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/delete(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-delete",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-delete\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>delete(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction④\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this②⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑥\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑤\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑤\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①①\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⓪\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑥\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑥\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror③\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store\">delete records from an object store</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑧\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⓪\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/clear()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-clear",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-clear\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>clear()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑤\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑦\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑧\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑥\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①②\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①①\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw③⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑦\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑦\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror④\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clear-an-object-store\" id=\"ref-for-clear-an-object-store\">clear an object store</a> with <var>store</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest①⑨\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request③\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③③\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/get(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-get",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-get\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>get(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑥\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑧\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④①\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑦\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①③\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①③\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror⑨\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑤⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-object-store\" id=\"ref-for-retrieve-a-value-from-an-object-store\">retrieve a value from an object store</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm\">the current Realm record</a>, <var>store</var>, and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②⓪\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request④\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑥\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getKey(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getkey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-getkey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getKey(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑦\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store⑨\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④③\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①④\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①④\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⓪\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range②\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-key-from-an-object-store\" id=\"ref-for-retrieve-a-key-from-an-object-store\">retrieve a key from an object store</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②①\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑤\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this③⑨\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getAll(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getall",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAll(query, count)|getAll(query)|getAll()\" id=\"dom-idbobjectstore-getall\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAll(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑧\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⓪\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑤\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror①⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑤\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑤\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①①\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range③\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-object-store\" id=\"ref-for-retrieve-multiple-values-from-an-object-store\">retrieve multiple values from an object store</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm①\">the current Realm record</a>, <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②②\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑥\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④②\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/getAllKeys(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-getallkeys",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAllKeys(query, count)|getAllKeys(query)|getAllKeys()\" id=\"dom-idbobjectstore-getallkeys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAllKeys(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction⑨\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①①\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑦\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⓪\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑥\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑥\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑧\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①②\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range④\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-keys-from-an-object-store\" id=\"ref-for-retrieve-multiple-keys-from-an-object-store\">retrieve multiple keys from an object store</a> with <var>store</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②③\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑦\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑤\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/count(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-count",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"count(query)|count()\" id=\"dom-idbobjectstore-count\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>count(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①⓪\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①②\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw④⑨\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑦\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑦\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①③\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑤\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range\" id=\"ref-for-count-the-records-in-a-range\">count the records in a range</a> with <var>store</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest②④\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑧\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑧\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/openCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-opencursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openCursor(query, direction)|openCursor(query)|openCursor()\" id=\"dom-idbobjectstore-opencursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this④⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①①\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①③\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤①\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②②\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑥⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑧\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active①⑨\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑤\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑥\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor①⑧\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position③\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value①\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source⑨\">source</a> set to <var>store</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range②\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag①\">key only flag</a> set to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm②\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request⑨\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤①\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/openKeyCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-openkeycursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()\" id=\"dom-idbobjectstore-openkeycursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openKeyCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①②\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①④\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤③\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②③\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state①⑨\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⓪\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑥\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑦\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②⓪\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction①\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position④\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction②\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key①\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value②\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⓪\">source</a> set to <var>store</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range④\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag②\">key only flag</a> set to true.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor①\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm③\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⓪\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤④\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request①\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/createIndex(name, keyPath, options)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-createindex",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"createIndex(name, keyPath, options)|createIndex(name, keyPath)\" id=\"dom-idbobjectstore-createindex\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>createIndex(<var>name</var>, <var>keyPath</var>, <var>options</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①③\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑤\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction③③\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑤\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑥\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑥\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑦\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⓪\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②①\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑦\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑤\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name④\">named</a> <var>name</var> already exists in <var>store</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑧\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror⑥\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑦⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is not a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#valid-key-path\" id=\"ref-for-valid-key-path①\">valid key path</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑤⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#syntaxerror\" id=\"ref-for-syntaxerror②\">SyntaxError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>unique</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindexparameters-unique\" id=\"ref-for-dom-idbindexparameters-unique①\">unique</a></code> member.</p>"
        },
        {
          "html": "<p>Let <var>multiEntry</var> be <var>options</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindexparameters-multientry\" id=\"ref-for-dom-idbindexparameters-multientry\">multiEntry</a></code> member.</p>"
        },
        {
          "html": "<p>If <var>keyPath</var> is a sequence and <var>multiEntry</var> is\ntrue, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⓪\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror③\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑥\">index</a> in <var>store</var>.\nSet <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑤\">name</a> to <var>name</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-key-path\" id=\"ref-for-index-key-path③\">key path</a> to <var>keyPath</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag②\">unique flag</a> to <var>unique</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag②\">multiEntry flag</a> to <var>multiEntry</var>.</p>"
        },
        {
          "html": "<p>Add <var>index</var> to <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set②\">index set</a>.</p>"
        },
        {
          "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑤\">index handle</a> associated with <var>index</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑧\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/index(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-index",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>index(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑤⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①④\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑥\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥①\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②①\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①②\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror②⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept②⑨\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑥\">named</a> <var>name</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set③\">index set</a> if one exists, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥③\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror③\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑥\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑥\">index handle</a> associated with <var>index</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥②\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBObjectStore/deleteIndex(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbobjectstore-deleteindex",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBObjectStore\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbobjectstore-deleteindex\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>deleteIndex(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-transaction\" id=\"ref-for-object-store-handle-transaction①⑤\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑦\">object store</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction③⑦\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⓪\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>store</var> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑤\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②②\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②②\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑧\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑧⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⓪\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name⑦\">named</a> <var>name</var> in <var>store</var> if one exists, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror④\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⓪\">DOMException</a></code> otherwise.</p>"
        },
        {
          "html": "<p>Remove <var>index</var> from <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set④\">index set</a>.</p>"
        },
        {
          "html": "<p>Destroy <var>index</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex name setter",
      "html": "The <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-name\" id=\"ref-for-dom-idbindex-name③\">name</a></code> setter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>name</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#the-given-value\" id=\"ref-for-the-given-value①\">the given value</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④②\">upgrade transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑧\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③③\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②③\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②③\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑥⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror①⑨\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧①\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⓪\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③④\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①③\">name</a> is equal to <var>name</var>, terminate these steps.</p>"
        },
        {
          "html": "<p>If an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③④\">index</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①④\">named</a> <var>name</var> already exists in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧②\">object store</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror⑧\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①⑤\">name</a> to <var>name</var>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑥⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-name\" id=\"ref-for-index-handle-name\">name</a> to <var>name</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/get(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-get",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbindex-get\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>get(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction①\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑤\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧③\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑤\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②④\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑤\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦③\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②①\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑧\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-referenced-value-from-an-index\" id=\"ref-for-retrieve-a-referenced-value-from-an-index\">retrieve a referenced value from an index</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm④\">the current Realm record</a>, <var>index</var>, and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③④\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①①\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑥\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getKey(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getkey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbindex-getkey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getKey(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction②\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑥\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧④\">object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑥\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException⑨⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑤\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑥\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑤\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②②\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range⑨\">converting a value to a key range</a> with <var>query</var> and true. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-index\" id=\"ref-for-retrieve-a-value-from-an-index\">retrieve a value from an index</a> with <var>index</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑤\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①②\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑦⑨\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getAll(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getall",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAll(query, count)|getAll(query)|getAll()\" id=\"dom-idbindex-getall\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAll(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction③\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑦\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑤\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑦\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑥\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑦\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②③\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①⓪\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-referenced-values-from-an-index\" id=\"ref-for-retrieve-multiple-referenced-values-from-an-index\">retrieve multiple referenced values from an index</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑤\">the current Realm record</a>, <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑥\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①③\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧②\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/getAllKeys(query, count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-getallkeys",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"getAllKeys(query, count)|getAllKeys(query)|getAllKeys()\" id=\"dom-idbindex-getallkeys\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>getAllKeys(<var>query</var>, <var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction④\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑧\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑥\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑧\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑦\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑧\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑦⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②④\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①①\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-index\" id=\"ref-for-retrieve-multiple-values-from-an-index\">retrieve multiple values from an index</a> with <var>index</var>, <var>range</var>, and <var>count</var> if given.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑦\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①④\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑤\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/count(query)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-count",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"count(query)|count()\" id=\"dom-idbindex-count\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>count(<var>query</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑤\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index⑨\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑦\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⓪\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror③⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑧\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active②⑨\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑤\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①②\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range\" id=\"ref-for-count-the-records-in-a-range①\">count the records in a range</a> with <var>index</var> and <var>range</var>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest③⑧\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑤\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑧\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/openCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-opencursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openCursor(query, direction)|openCursor(query)|openCursor()\" id=\"dom-idbindex-opencursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑧⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑥\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①⓪\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑧\">object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⓪\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state②⑨\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③①\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧③\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑦\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⓪⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①③\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②④\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction②\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑤\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction③\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag②\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key②\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value③\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①①\">source</a> set to <var>index</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range⑥\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag④\">key only flag</a> set to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor②\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑥\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑥\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨①\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request②\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBIndex/openKeyCursor(query, direction)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbindex-openkeycursor",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBIndex\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"openKeyCursor(query, direction)|openKeyCursor(query)|openKeyCursor()\" id=\"dom-idbindex-openkeycursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>openKeyCursor(<var>query</var>, <var>direction</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-transaction\" id=\"ref-for-index-handle-transaction⑦\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>index</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①①\">index</a>.</p>"
        },
        {
          "html": "<p>If <var>index</var> or <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑧⑨\">object store</a> has\nbeen deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⓪\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③②\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑤\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror②⑧\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key-range\" id=\"ref-for-convert-a-value-to-a-key-range①④\">converting a value to a key range</a> with <var>query</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "<p>Let <var>cursor</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor\" id=\"ref-for-cursor②⑥\">cursor</a> with its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction③\">transaction</a> set to <var>transaction</var>,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑥\">position</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction④\">direction</a> set to <var>direction</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag③\">got value flag</a> set to false,\nundefined <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key③\">key</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value④\">value</a>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①②\">source</a> set to <var>index</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range⑧\">range</a> set to <var>range</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑤\">key only flag</a> set to true.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor③\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑦\">the current Realm record</a> and <var>cursor</var>.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be the result of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑦\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this⑨④\">this</a> and <var>operation</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request③\">request</a> to <var>request</var>.</p>"
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/only(value)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-only",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbkeyrange-only\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>only(<var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑤\">converting a value to a key</a> with <var>value</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑥\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①③\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑥\">key range</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#containing-only\" id=\"ref-for-containing-only①\">containing only</a> <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/lowerBound(lower, open)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-lowerbound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"lowerBound(lower, open)|lowerBound(lower)\" id=\"dom-idbkeyrange-lowerbound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>lowerBound(<var>lower</var>, <var>open</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>lowerKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑥\">converting a value to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①④\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑦\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound⑨\">lower bound</a> set to <var>lowerKey</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑤\">lower open flag</a> set to <var>open</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound⑨\">upper bound</a> set to null, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑤\">upper open flag</a> set to true.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/upperBound(upper, open)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-upperbound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"upperBound(upper, open)|upperBound(upper)\" id=\"dom-idbkeyrange-upperbound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>upperBound(<var>upper</var>, <var>open</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>upperKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑦\">converting a value to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>upperKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑧\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑤\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑧\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound①⓪\">lower bound</a> set to null, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑥\">lower open flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound①⓪\">upper bound</a> set to <var>upperKey</var>, and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑥\">upper open flag</a> set to <var>open</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/bound(lower, upper, lowerOpen, upperOpen)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-bound",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"bound(lower, upper, lowerOpen, upperOpen)|bound(lower, upper, lowerOpen)|bound(lower, upper)\" id=\"dom-idbkeyrange-bound\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>bound(<var>lower</var>, <var>upper</var>, <var>lowerOpen</var>, <var>upperOpen</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>lowerKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑧\">converting a value to a key</a> with <var>lower</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑧⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑥\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>upperKey</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key⑨\">converting a value to a key</a> with <var>upper</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>upperKey</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑦\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>lowerKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than④\">greater than</a> <var>upperKey</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨①\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑧\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Create and return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range\" id=\"ref-for-key-range④⑨\">key range</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-bound\" id=\"ref-for-key-range-lower-bound①①\">lower bound</a> set to <var>lowerKey</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-lower-open-flag\" id=\"ref-for-key-range-lower-open-flag⑦\">lower open flag</a> set to <var>lowerOpen</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-bound\" id=\"ref-for-key-range-upper-bound①①\">upper bound</a> set to <var>upperKey</var> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-range-upper-open-flag\" id=\"ref-for-key-range-upper-open-flag⑦\">upper open flag</a> set to <var>upperOpen</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBKeyRange/includes(key)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbkeyrange-includes",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBKeyRange\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbkeyrange-includes\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>includes(<var>key</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>k</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⓪\">converting a value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>k</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror①⑨\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①①⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return true if <var>k</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①\">in</a> this range, and false otherwise.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/advance(count)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-advance",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-advance\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>advance(<var>count</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is 0 (zero), <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨③\">throw</a> a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#exceptiondef-typeerror\" id=\"ref-for-exceptiondef-typeerror②\">TypeError</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction④\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③①\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑤\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③⓪\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑤\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store①\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑤\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑤\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag④\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑥\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑤\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑥\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag③\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①②\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor④\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑧\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑦\">this</a>, and <var>count</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑧\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑥\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/continue(key)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-continue",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" data-lt=\"continue(key)|continue()\" id=\"dom-idbcursor-continue\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>continue(<var>key</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⓪⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑤\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③②\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑥\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑦\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③①\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑦\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store②\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑧\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①②⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑦\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw⑨⑨\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror④⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "If <var>key</var> is given, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①①\">converting a value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⓪\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③①\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
            },
            {
              "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than②\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to③\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑦\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑦\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next③\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-nextunique\" id=\"ref-for-dom-idbcursordirection-nextunique②\">nextunique</a></code>\", then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②①\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③②\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑤\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to④\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑧\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑧\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev③\">prev</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prevunique\" id=\"ref-for-dom-idbcursordirection-prevunique②\">prevunique</a></code>\", then <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②②\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③③\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag⑧\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑦\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag④\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①③\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor⑤\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm⑨\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑧\">this</a>, and <var>key</var> (if given).</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request①⑨\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①①⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑧\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/continuePrimaryKey(key, primaryKey)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-continueprimarykey",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-continueprimarykey\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>continuePrimaryKey(<var>key</var>, <var>primaryKey</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑥\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③③\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑦\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪③\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③②\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source①⑨\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store③\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪④\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②⓪\">source</a> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⑧\">index</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑤\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror⑤\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction⑨\">direction</a> is not \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next④\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev④\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidaccesserror\" id=\"ref-for-invalidaccesserror⑥\">InvalidAccessError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①⓪\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑦\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤②\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①③⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①②\">converting a value to a key</a> with <var>key</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑧\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②③\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be <var>r</var>.</p>"
        },
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①③\">converting a value to a key</a> with <var>primaryKey</var>. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is invalid, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①⓪⑨\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②④\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>primaryKey</var> be <var>r</var>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than③\">less than</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position⑨\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①⓪\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑤\">next</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑤\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑥\">greater than</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①⓪\">position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①①\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑤\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①①\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑥\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑤\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①②⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①①\">position</a> and <var>primaryKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than④\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑥\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position②\">object store position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①②\">direction</a> is\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑥\">next</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①②\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑦\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>key</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑦\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①②\">position</a> and <var>primaryKey</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑦\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑧\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position③\">object store position</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①③\">direction</a> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑥\">prev</a></code>\", <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①③\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror②⑧\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①④⑤\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①①\">got value flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>request</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-request\" id=\"ref-for-cursor-request⑧\">request</a>.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑤\">processed flag</a> to false.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①④\">done flag</a> to false.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor\" id=\"ref-for-iterate-a-cursor⑥\">iterate a cursor</a> with <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#current-realm\" id=\"ref-for-current-realm①⓪\">the current Realm record</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑦\">this</a>, <var>key</var>, and <var>primaryKey</var>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②⓪\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②①\">source</a>, <var>operation</var>, and <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/update(value)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-update",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-update\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>update(<var>value</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①③⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑦\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③④\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active③⑨\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①④\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③④\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction⑨\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑤\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror⑥\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤①\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②②\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑤\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑥\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤④\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤②\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①③\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑦\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑤\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤③\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑥\">key only flag</a> is true, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑧\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑥\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>targetRealm</var> be a user-agent defined <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/executable-code-and-execution-contexts.html#realm\" id=\"ref-for-realm①\">Realm</a>.</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#clone\" id=\"ref-for-clone①\">clone</a> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>.\nRethrow any exceptions.</p>"
        },
        {
          "html": "If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑥\">effective object store</a> uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys⑤\">in-line keys</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>kpk</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path②\">extracting a key from a value using a key path</a> with <var>clone</var> and the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⑥\">key path</a> of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑦\">effective object store</a>.\nRethrow any exceptions.</p>"
            },
            {
              "html": "<p>If <var>kpk</var> is failure, invalid, or not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to⑨\">equal to</a> <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key④\">effective key</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①①⑨\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#dataerror\" id=\"ref-for-dataerror③⓪\">DataError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑤\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store\" id=\"ref-for-store-a-record-into-an-object-store①\">store a record into an object store</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑧\">effective object store</a>, <var>clone</var>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key⑤\">effective key</a>, and false.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest④③\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②①\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑧\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBCursor/delete()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbcursor-delete",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBCursor\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbcursor-delete\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>delete()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①④⑨\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-transaction\" id=\"ref-for-cursor-transaction⑧\">transaction</a>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑤\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⓪\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⓪\">throw</a> a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#transactioninactiveerror\" id=\"ref-for-transactioninactiveerror③⑤\">TransactionInactiveError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-read-only-transaction\" id=\"ref-for-transaction-read-only-transaction①⓪\">read-only transaction</a>, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②①\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#readonlyerror\" id=\"ref-for-readonlyerror⑦\">ReadOnlyError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑦\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⓪\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②③\">source</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store⑨\">effective object store</a> has been deleted, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②②\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑦\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤①\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①④\">got value flag</a> is false, indicating that\nthe cursor is being iterated or has iterated past its end, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②③\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑧\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑤⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑦\">key only flag</a> is true, <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②④\">throw</a> an\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑤⑨\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⓪\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>operation</var> be an algorithm to run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store①\">delete records from an object store</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-object-store\" id=\"ref-for-cursor-effective-object-store①⓪\">effective object store</a> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤④\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-effective-key\" id=\"ref-for-cursor-effective-key⑥\">effective key</a>.</p>"
        },
        {
          "html": "<p>Return the result (an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#idbrequest\" id=\"ref-for-idbrequest④④\">IDBRequest</a></code>) of running <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②②\">asynchronously execute a request</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⑤\">this</a> and <var>operation</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/objectStoreNames",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-objectstorenames",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"attribute\" data-export=\"\" id=\"dom-idbtransaction-objectstorenames\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStoreNames</code></dfn> getter steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>names</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑤\">list</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑦\">names</a> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨①\">object stores</a> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑤⑦\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①⓪\">scope</a>.</p>"
        },
        {
          "html": "<p>Return the result (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#domstringlist\" id=\"ref-for-domstringlist⑥\">DOMStringList</a></code>) of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#create-a-sorted-name-list\" id=\"ref-for-create-a-sorted-name-list②\">creating a sorted name list</a> with <var>names</var>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/objectStore(name)",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-objectstore",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-objectstore\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>objectStore(<var>name</var>)</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥②\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑥\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑤\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑤\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥⓪\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>store</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨③\">object store</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑧\">named</a> <var>name</var> in <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥③\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①②\">scope</a>, or <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑥\">throw</a> a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notfounderror\" id=\"ref-for-notfounderror⑤\">NotFoundError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑦\">DOMException</a></code> if none.</p>"
        },
        {
          "html": "<p>Return an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle①⓪\">object store handle</a> associated with <var>store</var> and <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥④\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/abort()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-abort",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-abort\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>abort()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑤\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑦\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing①\">committing</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑥\">finished</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑦\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥①\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑧\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Set <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑥\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑧\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive②\">inactive</a> and run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction③\">abort a transaction</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑦\">this</a> and null.</p>"
        }
      ]
    },
    {
      "name": "IDBTransaction/commit()",
      "href": "https://www.w3.org/TR/IndexedDB-3/#dom-idbtransaction-commit",
      "html": "The <dfn class=\"dfn-paneled idl-code has-dfn-panel\" data-dfn-for=\"IDBTransaction\" data-dfn-type=\"method\" data-export=\"\" id=\"dom-idbtransaction-commit\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\"><code>commit()</code></dfn> method steps are:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑧\">this</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state③⑨\">state</a> is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④①\">active</a>,\nthen <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-throw\" id=\"ref-for-dfn-throw①②⑧\">throw</a> an \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#invalidstateerror\" id=\"ref-for-invalidstateerror⑥②\">InvalidStateError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑥⑨\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction\">commit a transaction</a> with <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#this\" id=\"ref-for-this①⑥⑨\">this</a>.</p>"
        }
      ]
    },
    {
      "name": "open a database connection",
      "href": "https://www.w3.org/TR/IndexedDB-3/#open-a-database-connection",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"open-a-database-connection\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">open a database connection</dfn> with <var>storageKey</var> which requested the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑤\">database</a> to be opened, a database <var>name</var>, a database <var>version</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>queue</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-queue\" id=\"ref-for-connection-queue②\">connection queue</a> for <var>storageKey</var> and <var>name</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to <var>queue</var>.</p>"
        },
        {
          "html": "<p>Wait until all previous requests in <var>queue</var> have been processed.</p>"
        },
        {
          "html": "<p>Let <var>db</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑥\">database</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name④\">named</a> <var>name</var> in <var>storageKey</var>, or null otherwise.</p>"
        },
        {
          "html": "<p>If <var>version</var> is undefined, let <var>version</var> be 1 if <var>db</var> is null, or <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version⑨\">version</a> otherwise.</p>"
        },
        {
          "html": "<p>If <var>db</var> is null, let <var>db</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑦\">database</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name⑤\">name</a> <var>name</var>, <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⓪\">version</a> 0 (zero), and with\nno <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨④\">object stores</a>. If this fails for any reason, return an\nappropriate error (e.g. a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror④\">QuotaExceededError</a></code>\" or\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror③\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⓪\">DOMException</a></code>).</p>"
        },
        {
          "html": "<p>If <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①①\">version</a> is greater than <var>version</var>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#versionerror\" id=\"ref-for-versionerror①\">VersionError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦①\">DOMException</a></code> and abort these steps.</p>"
        },
        {
          "html": "<p>Let <var>connection</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤①\">connection</a> to <var>db</var>.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-version\" id=\"ref-for-connection-version②\">version</a> to <var>version</var>.</p>"
        },
        {
          "html": "If <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①②\">version</a> is less than <var>version</var>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>openConnections</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set②\">set</a> of all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤②\">connections</a>,\nexcept <var>connection</var>, associated with <var>db</var>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①\">For each</a> <var>entry</var> of <var>openConnections</var> that does not have its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag④\">close pending flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task④\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event①\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-versionchange\" id=\"ref-for-eventdef-idbdatabase-versionchange⑧\">versionchange</a></code> at <var>entry</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①③\">version</a> and <var>version</var>.</p>"
            },
            {
              "html": "<p>Wait for all of the events to be fired.</p>"
            },
            {
              "html": "<p>If any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤③\">connections</a> in <var>openConnections</var> are still\nnot closed, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑤\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event②\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-blocked\" id=\"ref-for-eventdef-idbopendbrequest-blocked④\">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①④\">version</a> and <var>version</var>.</p>"
            },
            {
              "html": "<p><span id=\"version-change-close-block\">Wait</span> until all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑤④\">connections</a> in <var>openConnections</var> are <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑤\">closed</a>.</p>"
            },
            {
              "html": "<p>Run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-a-database\" id=\"ref-for-upgrade-a-database②\">upgrade a database</a> using <var>connection</var>, <var>version</var> and <var>request</var>.</p>"
            },
            {
              "html": "<p>If <var>connection</var> was <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑥\">closed</a>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception①\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror③\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦②\">DOMException</a></code> and abort these steps.</p>"
            },
            {
              "html": "<p>If the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑥\">upgrade transaction</a> was aborted, run the steps\nto <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection\" id=\"ref-for-close-a-database-connection④\">close a database connection</a> with <var>connection</var>,\nreturn a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception②\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror④\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦③\">DOMException</a></code> and abort these steps.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>connection</var>.</p>"
        }
      ]
    },
    {
      "name": "close a database connection",
      "href": "https://www.w3.org/TR/IndexedDB-3/#close-a-database-connection",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"close-a-database-connection\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">close a database connection</dfn> with a <var>connection</var> object, and an\noptional <var>forced flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag⑤\">close pending flag</a> to true.</p>"
        },
        {
          "html": "<p>If the <var>forced flag</var> is true, then for each <var>transaction</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑦\">created</a> using <var>connection</var> run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction④\">abort a transaction</a> with <var>transaction</var> and newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception③\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑤\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦④\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Wait for all transactions <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-created\" id=\"ref-for-transaction-created⑧\">created</a> using <var>connection</var> to complete.\nOnce they are complete, <var>connection</var> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑦\">closed</a>.</p>"
        },
        {
          "html": "<p>If the <var>forced flag</var> is true, then <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire③\">fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-close\" id=\"ref-for-eventdef-idbdatabase-close①\">close</a></code> at <var>connection</var>.</p>"
        }
      ]
    },
    {
      "name": "delete a database",
      "href": "https://www.w3.org/TR/IndexedDB-3/#delete-a-database",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"delete-a-database\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">delete a database</dfn> with the <var>storageKey</var> that\nrequested the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑤⑨\">database</a> to be deleted, a database <var>name</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>queue</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-queue\" id=\"ref-for-connection-queue③\">connection queue</a> for <var>storageKey</var> and <var>name</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to <var>queue</var>.</p>"
        },
        {
          "html": "<p>Wait until all previous requests in <var>queue</var> have been processed.</p>"
        },
        {
          "html": "<p>Let <var>db</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⓪\">database</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-name\" id=\"ref-for-database-name⑥\">named</a> <var>name</var> in <var>storageKey</var>, if one exists. Otherwise, return 0 (zero).</p>"
        },
        {
          "html": "<p>Let <var>openConnections</var> be the <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set③\">set</a> of all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⓪\">connections</a> associated with <var>db</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate②\">For each</a> <var>entry</var> of <var>openConnections</var> that does not have its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-close-pending-flag\" id=\"ref-for-connection-close-pending-flag⑧\">close pending flag</a> set to true, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑥\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event③\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbdatabase-versionchange\" id=\"ref-for-eventdef-idbdatabase-versionchange①⓪\">versionchange</a></code> at <var>entry</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑤\">version</a> and null.</p>"
        },
        {
          "html": "<p>Wait for all of the events to be fired.</p>"
        },
        {
          "html": "<p>If any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥①\">connections</a> in <var>openConnections</var> are still not\nclosed, <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑦\">queue a task</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event④\">fire a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-blocked\" id=\"ref-for-eventdef-idbopendbrequest-blocked⑤\">blocked</a></code> at <var>request</var> with <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑥\">version</a> and null.</p>"
        },
        {
          "html": "<p><span id=\"delete-close-block\">Wait</span> until all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥②\">connections</a> in <var>openConnections</var> are <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-closed\" id=\"ref-for-connection-closed⑧\">closed</a>.</p>"
        },
        {
          "html": "<p>Let <var>version</var> be <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑦\">version</a>.</p>"
        },
        {
          "html": "<p>Delete <var>db</var>. If this fails for any reason, return an appropriate\nerror (e.g. \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror⑤\">QuotaExceededError</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror④\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑤\">DOMException</a></code>).</p>"
        },
        {
          "html": "<p>Return <var>version</var>.</p>"
        }
      ]
    },
    {
      "name": "commit a transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"commit-a-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">commit a transaction</dfn> with the <var>transaction</var> to commit, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⓪\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing②\">committing</a>.</p>"
        },
        {
          "html": "Run the following steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel③\">in parallel</a>:",
          "rationale": "wait",
          "steps": [
            {
              "html": "<p>Wait until every item in <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list\">request list</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed①\">processed</a>.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④①\">state</a> is no longer <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing③\">committing</a>,\nthen terminate these steps.</p>"
            },
            {
              "html": "<p>Attempt to write any outstanding changes made by <var>transaction</var> to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥①\">database</a>, considering <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-durability-hint\" id=\"ref-for-transaction-durability-hint③\">durability hint</a>.</p>"
            },
            {
              "html": "<p>If an error occurs while writing the changes to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥②\">database</a>,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑤\">abort a transaction</a> with <var>transaction</var> and an\nappropriate type for the error, for example \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#quotaexceedederror\" id=\"ref-for-quotaexceedederror⑥\">QuotaExceededError</a></code>\" or\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#unknownerror\" id=\"ref-for-unknownerror⑤\">UnknownError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑥\">DOMException</a></code>, and terminate these steps.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑧\">Queue a task</a> to run these steps:",
              "rationale": "if",
              "steps": [
                {
                  "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑦\">upgrade transaction</a>, then set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-connection\" id=\"ref-for-transaction-connection③\">connection</a>’s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥③\">database</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction②\">upgrade transaction</a> to null.</p>"
                },
                {
                  "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④②\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑦\">finished</a>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire④\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbtransaction-complete\" id=\"ref-for-eventdef-idbtransaction-complete③\">complete</a></code> at <var>transaction</var>.</p>"
                },
                {
                  "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑧\">upgrade transaction</a>, then\nlet <var>request</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request③⑥\">request</a> associated with <var>transaction</var> and set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction③\">transaction</a> to null.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "abort a transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"abort-a-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">abort a transaction</dfn> with the <var>transaction</var> to abort, and <var>error</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>All the changes made to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥④\">database</a> by the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑤\">transaction</a> are reverted. For <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction④⑨\">upgrade transactions</a> this includes changes\nto the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑤\">object stores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept③⑨\">indexes</a>, as well as the\nchange to the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑧\">version</a>. Any <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑥\">object stores</a> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⓪\">indexes</a> which were created during the transaction are now\nconsidered deleted for the purposes of other algorithms.</p>"
        },
        {
          "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤⓪\">upgrade transaction</a>, run the steps\nto <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-an-upgrade-transaction\" id=\"ref-for-abort-an-upgrade-transaction①\">abort an upgrade transaction</a> with <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④③\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑧\">finished</a>.</p>"
        },
        {
          "html": "<p>If <var>error</var> is not null, set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-error\" id=\"ref-for-transaction-error①\">error</a> to <var>error</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate③\">For each</a> <var>request</var> of <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list①\">request list</a>,\nabort the steps to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request\" id=\"ref-for-asynchronously-execute-a-request②③\">asynchronously execute a request</a> for <var>request</var>,\nset <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑥\">processed flag</a> to true,\nand <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task⑨\">queue a task</a> to run these steps:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑤\">done flag</a> to true.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑦\">result</a> to undefined.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑦\">error</a> to a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception④\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑥\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑦\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire⑤\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbrequest-error\" id=\"ref-for-eventdef-idbrequest-error⑨\">error</a></code> at <var>request</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles③\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable③\">cancelable</a></code> attributes initialized to true.</p>"
            }
          ]
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①⓪\">Queue a task</a> to run these steps:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤①\">upgrade transaction</a>, then set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-connection\" id=\"ref-for-transaction-connection④\">connection</a>’s associated <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑤\">database</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction③\">upgrade transaction</a> to null.</p>"
            },
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-fire\" id=\"ref-for-concept-event-fire⑥\">Fire an event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbtransaction-abort\" id=\"ref-for-eventdef-idbtransaction-abort③\">abort</a></code> at <var>transaction</var> with its <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles④\">bubbles</a></code> attribute initialized to true.</p>"
            },
            {
              "html": "If <var>transaction</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤②\">upgrade transaction</a>, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>request</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-open-request\" id=\"ref-for-request-open-request①③\">open request</a> associated with <var>transaction</var>.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction④\">transaction</a> to null.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑧\">result</a> to undefined.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑦\">processed flag</a> to false.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑥\">done flag</a> to false.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "asynchronously execute a request",
      "href": "https://www.w3.org/TR/IndexedDB-3/#asynchronously-execute-a-request",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"asynchronously-execute-a-request\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">asynchronously execute a request</dfn> with the <var>source</var> object and an <var>operation</var> to perform on a database, and an optional <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>transaction</var> be the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑦\">transaction</a> associated with <var>source</var>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①\">Assert</a>: <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④④\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④②\">active</a>.</p>"
        },
        {
          "html": "<p>If <var>request</var> was not given, let <var>request</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request③⑨\">request</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-source\" id=\"ref-for-request-source③\">source</a> as <var>source</var>.</p>"
        },
        {
          "html": "<p>Add <var>request</var> to the end of <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list②\">request list</a>.</p>"
        },
        {
          "html": "Run these steps <a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel\" id=\"ref-for-in-parallel④\">in parallel</a>:",
          "rationale": "wait",
          "steps": [
            {
              "html": "<p>Wait until <var>request</var> is the first item in <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list③\">request list</a> that is not <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed\" id=\"ref-for-request-processed②\">processed</a>.</p>"
            },
            {
              "html": "<p>Let <var>result</var> be the result of performing <var>operation</var>.</p>"
            },
            {
              "html": "<p>If <var>result</var> is an error and <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑤\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-committing\" id=\"ref-for-transaction-committing⑤\">committing</a>,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑦\">abort a transaction</a> with <var>transaction</var> and <var>result</var>,\nand terminate these steps.</p>"
            },
            {
              "html": "<p>If <var>result</var> is an error,\nthen revert all changes made by <var>operation</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑧\">processed flag</a> to true.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①①\">Queue a task</a> to run these steps:",
              "rationale": "remove",
              "steps": [
                {
                  "html": "<p>Remove <var>request</var> from <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list④\">request list</a>.</p>"
                },
                {
                  "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑦\">done flag</a> to true.</p>"
                },
                {
                  "html": "If <var>result</var> is an error, then:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result⑨\">result</a> to undefined.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑧\">error</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-an-error-event\" id=\"ref-for-fire-an-error-event②\">Fire an error event</a> at <var>request</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "Otherwise:",
                  "rationale": "set",
                  "steps": [
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result①⓪\">result</a> to <var>result</var>.</p>"
                    },
                    {
                      "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error⑨\">error</a> to undefined.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-success-event\" id=\"ref-for-fire-a-success-event②\">Fire a success event</a> at <var>request</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p>Return <var>request</var>.</p>"
        }
      ]
    },
    {
      "name": "upgrade a database",
      "href": "https://www.w3.org/TR/IndexedDB-3/#upgrade-a-database",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"upgrade-a-database\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">upgrade a database</dfn> with <var>connection</var> (a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥④\">connection</a>), a new <var>version</var>, and a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>db</var> be <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑥\">database</a>.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#upgrade-transaction\" id=\"ref-for-upgrade-transaction⑤③\">upgrade transaction</a> with <var>connection</var> used as <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⑤\">connection</a>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-scope\" id=\"ref-for-transaction-scope①③\">scope</a> to <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set②\">object store set</a>.</p>"
        },
        {
          "html": "<p>Set <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-upgrade-transaction\" id=\"ref-for-database-upgrade-transaction④\">upgrade transaction</a> to <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑥\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive③\">inactive</a>.</p>"
        },
        {
          "html": "<p>Start <var>transaction</var>.</p>"
        },
        {
          "html": "<p>Let <var>old version</var> be <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version①⑨\">version</a>.</p>"
        },
        {
          "html": "<p>Set <var>db</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version②⓪\">version</a> to <var>version</var>. This change is\nconsidered part of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑦⑨\">transaction</a>, and so if the\ntransaction is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-abort\" id=\"ref-for-transaction-abort⑨\">aborted</a>, this change is reverted.</p>"
        },
        {
          "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-processed-flag\" id=\"ref-for-request-processed-flag⑨\">processed flag</a> to true.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task\" id=\"ref-for-queue-a-task①②\">Queue a task</a> to run these steps:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-result\" id=\"ref-for-request-result①①\">result</a> to <var>connection</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-transaction\" id=\"ref-for-request-transaction⑤\">transaction</a> to <var>transaction</var>.</p>"
            },
            {
              "html": "<p>Set <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-done-flag\" id=\"ref-for-request-done-flag①⑧\">done flag</a> to true.</p>"
            },
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑦\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④③\">active</a>.</p>"
            },
            {
              "html": "<p>Let <var>didThrow</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#fire-a-version-change-event\" id=\"ref-for-fire-a-version-change-event⑤\">firing a version change event</a> named <code class=\"idl\"><a class=\"idl-code\" data-link-type=\"event\" href=\"https://www.w3.org/TR/IndexedDB-3/#eventdef-idbopendbrequest-upgradeneeded\" id=\"ref-for-eventdef-idbopendbrequest-upgradeneeded①⓪\">upgradeneeded</a></code> at <var>request</var> with <var>old\nversion</var> and <var>version</var>.</p>"
            },
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑧\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive④\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>didThrow</var> is true, run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction⑧\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑤\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑦\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑧\">DOMException</a></code>.</p>"
            }
          ]
        },
        {
          "html": "<p>Wait for <var>transaction</var> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-finished\" id=\"ref-for-transaction-finished①⑨\">finish</a>.</p>"
        }
      ]
    },
    {
      "name": "abort an upgrade transaction",
      "href": "https://www.w3.org/TR/IndexedDB-3/#abort-an-upgrade-transaction",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"abort-an-upgrade-transaction\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">abort an upgrade transaction</dfn> with <var>transaction</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>connection</var> be <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection\" id=\"ref-for-connection⑥⑦\">connection</a>.</p>"
        },
        {
          "html": "<p>Let <var>database</var> be <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database\" id=\"ref-for-database⑥⑨\">database</a>.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-version\" id=\"ref-for-connection-version③\">version</a> to <var>database</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#database-version\" id=\"ref-for-database-version②②\">version</a> if <var>database</var> previously existed, or 0 (zero)\nif <var>database</var> was newly created.</p>"
        },
        {
          "html": "<p>Set <var>connection</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#connection-object-store-set\" id=\"ref-for-connection-object-store-set③\">object store set</a> to the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑧\">object stores</a> in <var>database</var> if <var>database</var> previously\nexisted, or the empty set if <var>database</var> was newly created.</p>"
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle\" id=\"ref-for-object-store-handle①②\">object store handle</a> <var>handle</var> associated with <var>transaction</var>, including those for <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store⑨⑨\">object stores</a> that\nwere created or deleted during <var>transaction</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑧\">object store</a> was not\nnewly created during <var>transaction</var>, set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-name\" id=\"ref-for-object-store-handle-name①\">name</a> to its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store①⑨\">object store</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-name\" id=\"ref-for-object-store-name①⑨\">name</a>.</p>"
            },
            {
              "html": "<p>Set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-index-set\" id=\"ref-for-object-store-handle-index-set⑤\">index set</a> to the set of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④②\">indexes</a> that\nreference its <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-handle-object-store\" id=\"ref-for-object-store-handle-object-store②⓪\">object store</a>.</p>"
            }
          ]
        },
        {
          "html": "For each <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle\" id=\"ref-for-index-handle⑨\">index handle</a> <var>handle</var> associated with <var>transaction</var>,\nincluding those for <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④③\">indexes</a> that were created or deleted\nduring <var>transaction</var>:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①②\">index</a> was not newly created\nduring <var>transaction</var>, set <var>handle</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-name\" id=\"ref-for-index-handle-name①\">name</a> to\nits <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-handle-index\" id=\"ref-for-index-handle-index①③\">index</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-name\" id=\"ref-for-index-name①⑥\">name</a>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "fire a success event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-a-success-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-a-success-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire a success event</dfn> at a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create①\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#event\" id=\"ref-for-event①\">Event</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type①\">type</a></code> attribute to \"<code>success</code>\".</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles⑤\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable④\">cancelable</a></code> attributes to false.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑧③\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be initially false.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state④⑨\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑤\">inactive</a>,\nthen set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⓪\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④④\">active</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch②\">Dispatch</a> <var>event</var> at <var>request</var> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤①\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑤\">active</a>,\nthen:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤②\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑥\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>legacyOutputDidListenersThrowFlag</var> is true,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①①\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑥\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑧\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑦⑨\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list⑤\">request list</a> is empty,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction②\">commit a transaction</a> with <var>transaction</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "fire an error event",
      "href": "https://www.w3.org/TR/IndexedDB-3/#fire-an-error-event",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"fire-an-error-event\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">fire an error event</dfn> at a <var>request</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>event</var> be the result of <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-create\" id=\"ref-for-concept-event-create②\">creating an event</a> using <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#event\" id=\"ref-for-event②\">Event</a></code>.</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-type\" id=\"ref-for-dom-event-type②\">type</a></code> attribute to \"<code>error</code>\".</p>"
        },
        {
          "html": "<p>Set <var>event</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-bubbles\" id=\"ref-for-dom-event-bubbles⑥\">bubbles</a></code> and <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://dom.spec.whatwg.org/#dom-event-cancelable\" id=\"ref-for-dom-event-cancelable⑤\">cancelable</a></code> attributes to true.</p>"
        },
        {
          "html": "<p>Let <var>transaction</var> be <var>request</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-concept\" id=\"ref-for-transaction-concept⑧④\">transaction</a>.</p>"
        },
        {
          "html": "<p>Let <var>legacyOutputDidListenersThrowFlag</var> be initially false.</p>"
        },
        {
          "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤③\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑦\">inactive</a>,\nthen set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤④\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑥\">active</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#concept-event-dispatch\" id=\"ref-for-concept-event-dispatch③\">Dispatch</a> <var>event</var> at <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request④⓪\">request</a> with <var>legacyOutputDidListenersThrowFlag</var>.</p>"
        },
        {
          "html": "If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑤\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑦\">active</a>,\nthen:",
          "rationale": "set",
          "steps": [
            {
              "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑥\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑧\">inactive</a>.</p>"
            },
            {
              "html": "<p>If <var>legacyOutputDidListenersThrowFlag</var> is true,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①②\">abort a transaction</a> with <var>transaction</var> and a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑦\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#aborterror\" id=\"ref-for-aborterror⑨\">AbortError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⓪\">DOMException</a></code> and terminate these steps.\nThis is done even if <var>event</var>’s <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#canceled-flag\" id=\"ref-for-canceled-flag\">canceled flag</a> is false.</p>"
            },
            {
              "html": "<p>If <var>event</var>’s <a data-link-type=\"dfn\" href=\"https://dom.spec.whatwg.org/#canceled-flag\" id=\"ref-for-canceled-flag①\">canceled flag</a> is false,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#abort-a-transaction\" id=\"ref-for-abort-a-transaction①③\">abort a transaction</a> using <var>transaction</var> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request\" id=\"ref-for-request④①\">request</a>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#request-error\" id=\"ref-for-request-error①①\">error</a>, and\nterminate these steps.</p>"
            },
            {
              "html": "<p>If <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-request-list\" id=\"ref-for-transaction-request-list⑥\">request list</a> is empty,\nthen run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#commit-a-transaction\" id=\"ref-for-commit-a-transaction③\">commit a transaction</a> with <var>transaction</var>.</p>"
            }
          ]
        }
      ]
    },
    {
      "name": "clone",
      "href": "https://www.w3.org/TR/IndexedDB-3/#clone",
      "html": "To make a <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"clone\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">clone</dfn> of <var>value</var> in <var>targetRealm</var> during <var>transaction</var>,\n  run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert②\">Assert</a>: <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑦\">state</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑧\">active</a>.</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑧\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-inactive\" id=\"ref-for-transaction-inactive⑨\">inactive</a>.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions\">?</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage\" id=\"ref-for-structuredserializeforstorage②\">StructuredSerializeForStorage</a>(<var>value</var>).</p>"
        },
        {
          "html": "<p>Let <var>clone</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①\">?</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        },
        {
          "html": "<p>Set <var>transaction</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-state\" id=\"ref-for-transaction-state⑤⑨\">state</a> to <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#transaction-active\" id=\"ref-for-transaction-active④⑨\">active</a>.</p>"
        },
        {
          "html": "<p>Return <var>clone</var>.</p>"
        }
      ]
    },
    {
      "name": "store a record into an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#store-a-record-into-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"store-a-record-into-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">store a record into an object store</dfn> with <var>store</var>, <var>value</var>, an optional <var>key</var>, and a <var>no-overwrite flag</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>store</var> uses a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-generator\" id=\"ref-for-key-generator①⑧\">key generator</a>, then:",
          "rationale": "if",
          "steps": [
            {
              "html": "If <var>key</var> is undefined, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#generate-a-key\" id=\"ref-for-generate-a-key\">generating a key</a> for <var>store</var>.</p>"
                },
                {
                  "html": "<p>If <var>key</var> is failure, then this operation failed with a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①⓪\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧①\">DOMException</a></code>. Abort this\nalgorithm without taking any further steps.</p>"
                },
                {
                  "html": "<p>If <var>store</var> also uses <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-in-line-keys\" id=\"ref-for-object-store-in-line-keys⑥\">in-line keys</a>, then run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#inject-a-key-into-a-value-using-a-key-path\" id=\"ref-for-inject-a-key-into-a-value-using-a-key-path\">inject a key into a value using a key path</a> with <var>value</var>, <var>key</var> and <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-key-path\" id=\"ref-for-object-store-key-path①⑦\">key path</a>.</p>"
                }
              ]
            },
            {
              "html": "<p>Otherwise, run <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#possibly-update-the-key-generator\" id=\"ref-for-possibly-update-the-key-generator\">possibly update the key generator</a> for <var>store</var> with <var>key</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If the <var>no-overwrite flag</var> was given to these steps and is true, and\na <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦④\">record</a> already exists in <var>store</var> with its key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⓪\">equal to</a> <var>key</var>, then this operation failed with a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①①\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧②\">DOMException</a></code>.\nAbort this algorithm without taking any further steps.</p>"
        },
        {
          "html": "<p>If a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑤\">record</a> already exists in <var>store</var> with its key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①①\">equal to</a> <var>key</var>, then remove the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑥\">record</a> from <var>store</var> using <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store\" id=\"ref-for-delete-records-from-an-object-store②\">delete records from an object store</a>.</p>"
        },
        {
          "html": "<p>Store a record in <var>store</var> containing <var>key</var> as its key and <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions③\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeforstorage\" id=\"ref-for-structuredserializeforstorage④\">StructuredSerializeForStorage</a>(<var>value</var>)\nas its value. The record is stored in the object store’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records\">list of records</a> such that the list is sorted\naccording to the key of the records in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑧\">ascending</a> order.</p>"
        },
        {
          "html": "For each <var>index</var> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced⑧\">references</a> <var>store</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>index key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path\" id=\"ref-for-extract-a-key-from-a-value-using-a-key-path③\">extracting a key from a value using a key path</a> with <var>value</var>, <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-key-path\" id=\"ref-for-index-key-path⑤\">key path</a>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑤\">multiEntry flag</a>.</p>"
            },
            {
              "html": "<p>If <var>index key</var> is an exception, or invalid, or failure, take no\nfurther actions for <var>index</var>, and continue these steps\nfor the next index.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑥\">multiEntry flag</a> is false, or if <var>index key</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key④\">array key</a>, and if <var>index</var> already contains a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑦\">record</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧②\">key</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①②\">equal to</a> <var>index\nkey</var>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag⑦\">unique flag</a> is true, then this\noperation failed with a \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①②\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧③\">DOMException</a></code>. Abort this\nalgorithm without taking any further steps.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑦\">multiEntry flag</a> is true and <var>index key</var> is\nan <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑤\">array key</a>, and if <var>index</var> already contains a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑧\">record</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧③\">key</a> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①③\">equal to</a> any of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#subkeys\" id=\"ref-for-subkeys①\">subkeys</a> of <var>index key</var>, and <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-unique-flag\" id=\"ref-for-index-unique-flag⑧\">unique flag</a> is true, then this operation failed with a\n\"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#constrainterror\" id=\"ref-for-constrainterror①③\">ConstraintError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧④\">DOMException</a></code>. Abort this algorithm without taking any\nfurther steps.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑧\">multiEntry flag</a> is false, or if <var>index key</var> is not an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑥\">array key</a> then store a record in <var>index</var> containing <var>index key</var> as its key and <var>key</var> as its value. The\nrecord is stored in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records\">list of records</a> such that the list is sorted primarily on the records keys,\nand secondarily on the records values, in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than⑨\">ascending</a> order.</p>"
            },
            {
              "html": "<p>If <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-multientry-flag\" id=\"ref-for-index-multientry-flag⑨\">multiEntry flag</a> is true and <var>index key</var> is\nan <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key⑦\">array key</a>, then for each <var>subkey</var> of the <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#subkeys\" id=\"ref-for-subkeys②\">subkeys</a> of <var>index key</var> store a record in <var>index</var> containing <var>subkey</var> as its key and <var>key</var> as its value. The\nrecords are stored in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records①\">list of records</a> such that the list is sorted primarily on the\nrecords keys, and secondarily on the records values, in <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⓪\">ascending</a> order.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a value from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-value-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a value from an object store</dfn> with <var>targetRealm</var>, <var>store</var> and <var>range</var>, run these steps.\nThey return undefined, an ECMAScript value, or an error (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⑤\">DOMException</a></code>):",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑦⑨\">record</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records①\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧④\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in②\">in</a> <var>range</var>, if\nany.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value①⑧\">value</a>. If an error occurs while reading the value from the\nunderlying storage, return a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑧\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notreadableerror\" id=\"ref-for-notreadableerror①\">NotReadableError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⑥\">DOMException</a></code>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions④\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize②\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple values from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"retrieve multiple values from an object store\" data-noexport=\"\" id=\"retrieve-multiple-values-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple values from an object\nstore</dfn> with <var>targetRealm</var>, <var>store</var>, <var>range</var> and optional <var>count</var>, run these steps.\nThey return a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑥\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any③⑨\">any</a></code>&gt;</code> or an error (a <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⑦\">DOMException</a></code>):",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑥\">list</a> containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⓪\">records</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records②\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑤\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in③\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑦\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate④\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value①⑨\">value</a>. If an error occurs while reading the value from the\nunderlying storage, return a newly <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-create-exception\" id=\"ref-for-dfn-create-exception⑨\">created</a> \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#notreadableerror\" id=\"ref-for-notreadableerror②\">NotReadableError</a></code>\" <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-DOMException\" id=\"ref-for-idl-DOMException①⑧⑧\">DOMException</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑤\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize③\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑦\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④⓪\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a key from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-key-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-key-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a key from an object store</dfn> with <var>store</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧①\">record</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records③\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑥\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in④\">in</a> <var>range</var>, if\nany.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value④\">converting a key to a value</a> with <var>record</var>’s key.</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple keys from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-keys-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-multiple-keys-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple keys from an object store</dfn> with <var>store</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧②\">records</a> in <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records④\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑧⑦\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑤\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑧\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑤\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑤\">converting a key to a value</a> with <var>record</var>’s key.</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑧\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④①\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a referenced value from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-referenced-value-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-referenced-value-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a referenced value from an index</dfn> with <var>targetRealm</var>, <var>index</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧③\">record</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records②\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys①\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑥\">in</a> <var>range</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value④\">referenced value</a>.</p>"
        },
        {
          "html": "<p>Return <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑥\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize④\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple referenced values from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-referenced-values-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-lt=\"retrieve multiple referenced values from an index\" data-noexport=\"\" id=\"retrieve-multiple-referenced-values-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple referenced values from an\nindex</dfn> with <var>targetRealm</var>, <var>index</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧④\">records</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records③\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys②\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑦\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list⑨\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑥\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value⑤\">referenced value</a>.</p>"
            },
            {
              "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑦\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize⑤\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>).</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence⑨\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④②\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "retrieve a value from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-a-value-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-a-value-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve a value from an index</dfn> with <var>index</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>record</var> be the first <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-records\" id=\"ref-for-index-records③\">record</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records④\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys③\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑧\">in</a> <var>range</var>, if any.</p>"
        },
        {
          "html": "<p>If <var>record</var> was not found, return undefined.</p>"
        },
        {
          "html": "<p>Return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑥\">converting a key to a value</a> with <var>record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#value\" id=\"ref-for-value②⓪\">value</a>.</p>"
        }
      ]
    },
    {
      "name": "retrieve multiple values from an index",
      "href": "https://www.w3.org/TR/IndexedDB-3/#retrieve-multiple-values-from-an-index",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"retrieve-multiple-values-from-an-index\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">retrieve multiple values from an index</dfn> with <var>index</var>, <var>range</var> and optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>count</var> is not given or is 0 (zero), let <var>count</var> be infinity.</p>"
        },
        {
          "html": "<p>Let <var>records</var> be a list containing the first <var>count</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-records\" id=\"ref-for-index-records④\">records</a> in <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records⑤\">list of records</a> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-keys\" id=\"ref-for-index-keys④\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in⑨\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Let <var>list</var> be an empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①⓪\">list</a>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑦\">For each</a> <var>record</var> of <var>records</var>:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑦\">converting a key to a value</a> with <var>record</var>’s value.</p>"
            },
            {
              "html": "<p>Append <var>entry</var> to <var>list</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Return <var>list</var> converted to a <code><a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#idl-sequence\" id=\"ref-for-idl-sequence①⓪\">sequence</a>&lt;<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://webidl.spec.whatwg.org/#idl-any\" id=\"ref-for-idl-any④③\">any</a></code>&gt;</code>.</p>"
        }
      ]
    },
    {
      "name": "delete records from an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#delete-records-from-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"delete-records-from-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">delete records from an object store</dfn> with <var>store</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Remove all records, if any, from <var>store</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-list-of-records\" id=\"ref-for-object-store-list-of-records⑤\">list of records</a> with key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⓪\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>For each <var>index</var> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced①⓪\">references</a> <var>store</var>, remove every <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑥\">record</a> from <var>index</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-list-of-records\" id=\"ref-for-index-list-of-records⑥\">list of records</a> whose value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①①\">in</a> <var>range</var>, if any such records exist.</p>"
        },
        {
          "html": "<p>Return undefined.</p>"
        }
      ]
    },
    {
      "name": "count the records in a range",
      "href": "https://www.w3.org/TR/IndexedDB-3/#count-the-records-in-a-range",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"count-the-records-in-a-range\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">count the records in a range</dfn> with <var>source</var> and <var>range</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>count</var> be the number of records, if any, in <var>source</var>’s list of\nrecords with key <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①②\">in</a> <var>range</var>.</p>"
        },
        {
          "html": "<p>Return <var>count</var>.</p>"
        }
      ]
    },
    {
      "name": "clear an object store",
      "href": "https://www.w3.org/TR/IndexedDB-3/#clear-an-object-store",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"clear-an-object-store\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">clear an object store</dfn> with <var>store</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Remove all records from <var>store</var>.</p>"
        },
        {
          "html": "<p>In all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⑥\">indexes</a> which <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced\" id=\"ref-for-index-referenced①①\">reference</a> <var>store</var>, remove all <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑦\">records</a>.</p>"
        },
        {
          "html": "<p>Return undefined.</p>"
        }
      ]
    },
    {
      "name": "iterate a cursor",
      "href": "https://www.w3.org/TR/IndexedDB-3/#iterate-a-cursor",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"iterate-a-cursor\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">iterate a cursor</dfn> with <var>targetRealm</var>, <var>cursor</var>, an optional <var>key</var> and <var>primaryKey</var> to iterate to, and an optional <var>count</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>source</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-source\" id=\"ref-for-cursor-source②④\">source</a>.</p>"
        },
        {
          "html": "<p>Let <var>direction</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-direction\" id=\"ref-for-cursor-direction①④\">direction</a>.</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert③\">Assert</a>: if <var>primaryKey</var> is given, <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept④⑦\">index</a> and <var>direction</var> is \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-next\" id=\"ref-for-dom-idbcursordirection-next⑦\">next</a></code>\" or \"<code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/IndexedDB-3/#dom-idbcursordirection-prev\" id=\"ref-for-dom-idbcursordirection-prev⑦\">prev</a></code>\".</p>"
        },
        {
          "html": "<p>Let <var>records</var> be the list of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store-record\" id=\"ref-for-object-store-record⑧⑧\">records</a> in <var>source</var>.</p>"
        },
        {
          "html": "<p>Let <var>range</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-range\" id=\"ref-for-cursor-range①⓪\">range</a>.</p>"
        },
        {
          "html": "<p>Let <var>position</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①③\">position</a>.</p>"
        },
        {
          "html": "<p>Let <var>object store position</var> be <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position④\">object store position</a>.</p>"
        },
        {
          "html": "<p>If <var>count</var> is not given, let <var>count</var> be 1.</p>"
        },
        {
          "html": "While <var>count</var> is greater than 0:",
          "rationale": "switch",
          "steps": [
            {
              "html": "Switch on <var>direction</var>:",
              "rationale": ".switch",
              "steps": [
                {
                  "operation": "switch",
                  "steps": [
                    {
                      "case": "\"next\"",
                      "html": "<p>Let <var>found record</var> be the first record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①③\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①④\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑤\">equal to</a> <var>key</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①④\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑥\">equal to</a> <var>primaryKey</var>, or the\n  record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑤\">greater than</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store①⓪③\">object store</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑥\">greater than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤⓪\">index</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑦\">equal to</a> <var>position</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑦\">greater than</a> <var>object store position</var> or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑧\">greater than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①③\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"nextunique\"",
                      "html": "<p>Let <var>found record</var> be the first record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than①⑨\">greater than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑧\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#greater-than\" id=\"ref-for-greater-than②⓪\">greater than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①④\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"prev\"",
                      "html": "<p>Let <var>found record</var> be the last record in <var>records</var> which\n  satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑤\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to①⑨\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>primaryKey</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②⓪\">equal to</a> <var>key</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑥\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②①\">equal to</a> <var>primaryKey</var>, or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑦\">less than</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#object-store\" id=\"ref-for-object-store①⓪④\">object store</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑧\">less than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, and <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤①\">index</a>, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②②\">equal to</a> <var>position</var> and the record’s value is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than⑨\">less than</a> <var>object store position</var> or the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①⓪\">less than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⑤\">in</a> <var>range</var>.</p>\n          </li></ul>"
                    },
                    {
                      "case": "\"prevunique\"",
                      "html": "<p>Let <var>temp record</var> be the last record in <var>records</var> which satisfy all of the following requirements:</p>\n          <ul>\n           <li data-md=\"\">\n            <p>If <var>key</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①①\">less than</a> or <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②③\">equal to</a> <var>key</var>.</p>\n           </li><li data-md=\"\">\n            <p>If <var>position</var> is defined, the record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#less-than\" id=\"ref-for-less-than①②\">less than</a> <var>position</var>.</p>\n           </li><li data-md=\"\">\n            <p>The record’s key is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#in\" id=\"ref-for-in①⑥\">in</a> <var>range</var>.</p>\n          </li></ul>\n          <p>If <var>temp record</var> is defined, let <var>found record</var> be the\n  first record in <var>records</var> whose <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⓪\">key</a> is <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②④\">equal to</a> <var>temp record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨①\">key</a>.</p>"
                    }
                  ]
                }
              ]
            },
            {
              "html": "If <var>found record</var> is not defined, then:",
              "rationale": "set",
              "steps": [
                {
                  "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key⑦\">key</a> to undefined.</p>"
                },
                {
                  "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤②\">index</a>, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position⑤\">object store position</a> to undefined.</p>"
                },
                {
                  "html": "<p>If <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag⑨\">key only flag</a> is false, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value⑧\">value</a> to undefined.</p>"
                },
                {
                  "html": "<p>Return null.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>position</var> be <var>found record</var>’s key.</p>"
            },
            {
              "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤③\">index</a>, let <var>object store\nposition</var> be <var>found record</var>’s value.</p>"
            },
            {
              "html": "<p>Decrease <var>count</var> by 1.</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-position\" id=\"ref-for-cursor-position①④\">position</a> to <var>position</var>.</p>"
        },
        {
          "html": "<p>If <var>source</var> is an <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-concept\" id=\"ref-for-index-concept⑤④\">index</a>, set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-object-store-position\" id=\"ref-for-cursor-object-store-position⑥\">object store position</a> to <var>object store position</var>.</p>"
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key\" id=\"ref-for-cursor-key⑧\">key</a> to <var>found record</var>’s key.</p>"
        },
        {
          "html": "If <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-key-only-flag\" id=\"ref-for-cursor-key-only-flag①⓪\">key only flag</a> is false, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>serialized</var> be <var>found record</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#index-referenced-value\" id=\"ref-for-index-referenced-value⑥\">referenced value</a>.</p>"
            },
            {
              "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-value\" id=\"ref-for-cursor-value⑨\">value</a> to <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑧\">!</a> <a data-link-type=\"abstract-op\" href=\"https://html.spec.whatwg.org/multipage/structured-data.html#structureddeserialize\" id=\"ref-for-structureddeserialize⑥\">StructuredDeserialize</a>(<var>serialized</var>, <var>targetRealm</var>)</p>"
            }
          ]
        },
        {
          "html": "<p>Set <var>cursor</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#cursor-got-value-flag\" id=\"ref-for-cursor-got-value-flag①⑤\">got value flag</a> to true.</p>"
        },
        {
          "html": "<p>Return <var>cursor</var>.</p>"
        }
      ]
    },
    {
      "name": "extract a key from a value using a key path",
      "href": "https://www.w3.org/TR/IndexedDB-3/#extract-a-key-from-a-value-using-a-key-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"extract-a-key-from-a-value-using-a-key-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">extract a key from a value using a key path</dfn> with <var>value</var>, <var>keyPath</var> and an optional <var>multiEntry flag</var>, run the\nfollowing steps. The result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨③\">key</a>, invalid, or\nfailure, or the steps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>r</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value\" id=\"ref-for-evaluate-a-key-path-on-a-value\">evaluating a key path on a value</a> with <var>value</var> and <var>keyPath</var>. Rethrow any\nexceptions.</p>"
        },
        {
          "html": "<p>If <var>r</var> is failure, return failure.</p>"
        },
        {
          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①④\">converting a value to a key</a> with <var>r</var> if the <var>multiEntry flag</var> is false, and the\nresult of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-multientry-key\" id=\"ref-for-convert-a-value-to-a-multientry-key\">converting a value to a multiEntry key</a> with <var>r</var> otherwise. Rethrow any exceptions.</p>"
        },
        {
          "html": "<p>If <var>key</var> is invalid, return invalid.</p>"
        },
        {
          "html": "<p>Return <var>key</var>.</p>"
        }
      ]
    },
    {
      "name": "evaluate a key path on a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"evaluate-a-key-path-on-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">evaluate a key path on a value</dfn> with <var>value</var> and <var>keyPath</var>, run the following steps. The result of these steps is an\nECMAScript value or failure, or the steps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>keyPath</var> is a <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①①\">list</a> of strings, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>result</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①②\">Array</a></code> object created as if by the\nexpression <code>[]</code>.</p>"
            },
            {
              "html": "<p>Let <var>i</var> be 0.</p>"
            },
            {
              "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑧\">For each</a> <var>item</var> of <var>keyPath</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>key</var> be the result of recursively <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#evaluate-a-key-path-on-a-value\" id=\"ref-for-evaluate-a-key-path-on-a-value①\">evaluating a key path on a value</a> with <var>item</var> and <var>value</var>.</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert④\">Assert</a>: <var>key</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type\">abrupt completion</a>.</p>"
                },
                {
                  "html": "<p>If <var>key</var> is failure, abort the overall algorithm and return\nfailure.</p>"
                },
                {
                  "html": "<p>Let <var>p</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions⑨\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tostring\" id=\"ref-for-sec-tostring\">ToString</a>(<var>i</var>).</p>"
                },
                {
                  "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty\">CreateDataProperty</a>(<var>result</var>, <var>p</var>, <var>key</var>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑤\">Assert</a>: <var>status</var> is true.</p>"
                },
                {
                  "html": "<p>Increase <var>i</var> by 1.</p>"
                }
              ]
            },
            {
              "html": "<p>Return <var>result</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>If <var>keyPath</var> is the empty string, return <var>value</var> and skip the\nremaining steps.</p>"
        },
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate⑨\">For each</a> <var>identifier</var> of <var>identifiers</var>, jump to the appropriate step below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If Type(value) is String, and identifier is \"length\"",
                  "html": "<p>Let <var>value</var> be a Number equal to the number of elements in <var>value</var>.</p>"
                },
                {
                  "case": "If value is an Array and identifier is \"length\"",
                  "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⓪\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tolength\" id=\"ref-for-sec-tolength\">ToLength</a>(<a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①①\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p\">Get</a>(<var>value</var>, \"<code>length</code>\")).</p>"
                },
                {
                  "case": "If value is a Blob and identifier is \"size\"",
                  "html": "<p>Let <var>value</var> be a Number equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-size\" id=\"ref-for-dfn-size①\">size</a></code>.</p>"
                },
                {
                  "case": "If value is a Blob and identifier is \"type\"",
                  "html": "<p>Let <var>value</var> be a String equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-type\" id=\"ref-for-dfn-type①\">type</a></code>.</p>"
                },
                {
                  "case": "If value is a File and identifier is \"name\"",
                  "html": "<p>Let <var>value</var> be a String equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-name\" id=\"ref-for-dfn-name①\">name</a></code>.</p>"
                },
                {
                  "case": "If value is a File and identifier is \"lastModified\"",
                  "html": "<p>Let <var>value</var> be a Number equal to <var>value</var>’s <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://www.w3.org/TR/FileAPI/#dfn-lastModified\" id=\"ref-for-dfn-lastModified①\">lastModified</a></code>.</p>"
                },
                {
                  "case": "Otherwise",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\" id=\"ref-for-sec-ecmascript-data-types-and-values①\">Type</a>(<var>value</var>) is not Object, return failure.</p>"
                    },
                    {
                      "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①②\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
                    },
                    {
                      "html": "<p>If <var>hop</var> is false, return failure.</p>"
                    },
                    {
                      "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①③\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p①\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
                    },
                    {
                      "html": "<p>If <var>value</var> is undefined, return failure.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑥\">Assert</a>: <var>value</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type①\">abrupt completion</a>.</p>"
        },
        {
          "html": "<p>Return <var>value</var>.</p>"
        }
      ]
    },
    {
      "name": "check that a key could be injected into a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#check-that-a-key-could-be-injected-into-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"check-that-a-key-could-be-injected-into-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">check that a key could be injected into a value</dfn> with <var>value</var> and a <var>keyPath</var>, run the following steps.\nThe result of these steps is either true or false.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split①\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑦\">Assert</a>: <var>identifiers</var> is not empty.</p>"
        },
        {
          "html": "<p>Remove the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item①\">item</a> of <var>identifiers</var>.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①⓪\">For each</a> remaining <var>identifier</var> of <var>identifiers</var>, if any:",
          "rationale": "if",
          "steps": [
            {
              "html": "<p>If <var>value</var> is not an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects①\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①④\">Array</a></code>, return false.</p>"
            },
            {
              "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①④\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty①\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
            },
            {
              "html": "<p>If <var>hop</var> is false, return true.</p>"
            },
            {
              "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑤\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p②\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
            }
          ]
        },
        {
          "html": "<p>Return true if <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects②\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑤\">Array</a></code>, or false otherwise.</p>"
        }
      ]
    },
    {
      "name": "inject a key into a value using a key path",
      "href": "https://www.w3.org/TR/IndexedDB-3/#inject-a-key-into-a-value-using-a-key-path",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"inject-a-key-into-a-value-using-a-key-path\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">inject a key into a value using a key path</dfn> with <var>value</var>, a <var>key</var> and a <var>keyPath</var>, run these steps:",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>identifiers</var> be the result of <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#strictly-split\" id=\"ref-for-strictly-split②\">strictly splitting</a> <var>keyPath</var> on U+002E FULL STOP characters (.).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑧\">Assert</a>: <var>identifiers</var> is not empty.</p>"
        },
        {
          "html": "<p>Let <var>last</var> be the last <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item②\">item</a> of <var>identifiers</var> and remove it from\nthe list.</p>"
        },
        {
          "html": "<a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-iterate\" id=\"ref-for-list-iterate①①\">For each</a> remaining <var>identifier</var> of <var>identifiers</var>:",
          "rationale": "assert",
          "steps": [
            {
              "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert⑨\">Assert</a>: <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects③\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑥\">Array</a></code>.</p>"
            },
            {
              "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑥\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty②\">HasOwnProperty</a>(<var>value</var>, <var>identifier</var>).</p>"
            },
            {
              "html": "If <var>hop</var> is false, then:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>o</var> be a new <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects④\">Object</a></code> created as if by the\nexpression <code>({})</code>.</p>"
                },
                {
                  "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty①\">CreateDataProperty</a>(<var>value</var>, <var>identifier</var>, <var>o</var>).</p>"
                },
                {
                  "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⓪\">Assert</a>: <var>status</var> is true.</p>"
                }
              ]
            },
            {
              "html": "<p>Let <var>value</var> be <a data-link-type=\"dfn\" data-refhint-key=\"10172eff\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑦\">!</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p③\">Get</a>(<var>value</var>, <var>identifier</var>).</p>"
            }
          ]
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①①\">Assert</a>: <var>value</var> is an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object-objects\" id=\"ref-for-sec-object-objects⑤\">Object</a></code> or an <code class=\"idl\"><a data-link-type=\"idl\" href=\"https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array-objects\" id=\"ref-for-sec-array-objects①⑦\">Array</a></code>.</p>"
        },
        {
          "html": "<p>Let <var>keyValue</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑧\">converting a key to a value</a> with <var>key</var>.</p>"
        },
        {
          "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty②\">CreateDataProperty</a>(<var>value</var>, <var>last</var>, <var>keyValue</var>).</p>"
        },
        {
          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①②\">Assert</a>: <var>status</var> is true.</p>"
        }
      ]
    },
    {
      "name": "convert a key to a value",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-key-to-a-value\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a key to a value</dfn> with <var>key</var>, run the following steps.\nThe steps return an ECMAScript value.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>Let <var>type</var> be <var>key</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑦\">type</a>.</p>"
        },
        {
          "html": "<p>Let <var>value</var> be <var>key</var>’s <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑤\">value</a>.</p>"
        },
        {
          "html": "Switch on <var>type</var>:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "number",
                  "html": "<p>Return an ECMAScript Number value equal to <var>value</var></p>"
                },
                {
                  "case": "string",
                  "html": "<p>Return an ECMAScript String value equal to <var>value</var></p>"
                },
                {
                  "case": "date",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>date</var> be the result of executing the ECMAScript Date\n  constructor with the single argument <var>value</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①③\">Assert</a>: <var>date</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type②\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Return <var>date</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "binary",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>len</var> be <var>value</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#byte-sequence-length\" id=\"ref-for-byte-sequence-length\">length</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>buffer</var> be the result of executing the ECMAScript\n  ArrayBuffer constructor with <var>len</var>.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①④\">Assert</a>: <var>buffer</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type③\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Set the entries in <var>buffer</var>’s\n  [[ArrayBufferData]] internal slot to the entries\n  in <var>value</var>.</p>"
                    },
                    {
                      "html": "<p>Return <var>buffer</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "array",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>array</var> be the result of executing the ECMAScript Array\n  constructor with no arguments.</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑤\">Assert</a>: <var>array</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type④\">abrupt completion</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>len</var> be <var>value</var>’s <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-size\" id=\"ref-for-list-size⑥\">size</a>.</p>"
                    },
                    {
                      "html": "<p>Let <var>index</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>index</var> is less than <var>len</var>:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>entry</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-key-to-a-value\" id=\"ref-for-convert-a-key-to-a-value⑨\">converting a key to a value</a> with <var>value</var>[<var>index</var>].</p>"
                        },
                        {
                          "html": "<p>Let <var>status</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-createdataproperty\" id=\"ref-for-sec-createdataproperty③\">CreateDataProperty</a>(<var>array</var>, <var>index</var>, <var>entry</var>).</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#assert\" id=\"ref-for-assert①⑥\">Assert</a>: <var>status</var> is true.</p>"
                        },
                        {
                          "html": "<p>Increase <var>index</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Return <var>array</var>.</p>"
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "convert a value to a key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a key</dfn> with an ECMAScript value <var>input</var>, and an optional <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set④\">set</a> <var>seen</var>, run the following steps.\nThe result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨④\">key</a> or invalid, or the\nsteps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "<p>If <var>seen</var> was not given, then let <var>seen</var> be a new empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set⑤\">set</a>.</p>"
        },
        {
          "html": "<p>If <var>seen</var> <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-contain\" id=\"ref-for-list-contain\">contains</a> <var>input</var>, then return invalid.</p>"
        },
        {
          "html": "Jump to the appropriate step below:",
          "rationale": ".switch",
          "steps": [
            {
              "operation": "switch",
              "steps": [
                {
                  "case": "If Type(input) is Number",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>input</var> is NaN then return invalid.</p>"
                    },
                    {
                      "html": "<p>Otherwise, return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑤\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑧\">type</a> <em>number</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑥\">value</a> <var>input</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is a Date (has a [[DateValue]] internal slot)",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>ms</var> be the value of <var>input</var>’s\n  [[DateValue]] internal slot.</p>"
                    },
                    {
                      "html": "<p>If <var>ms</var> is NaN then return invalid.</p>"
                    },
                    {
                      "html": "<p>Otherwise, return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑥\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type⑨\">type</a> <em>date</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑦\">value</a> <var>ms</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If Type(input) is String",
                  "html": "",
                  "rationale": "return",
                  "steps": [
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑦\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①⓪\">type</a> <em>string</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑧\">value</a> <var>input</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is a buffer source type",
                  "html": "",
                  "rationale": "if",
                  "steps": [
                    {
                      "html": "<p>If <var>input</var> is [<a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#buffersource-detached\" id=\"ref-for-buffersource-detached\">detached</a>] then return invalid.</p>"
                    },
                    {
                      "html": "<p>Let <var>bytes</var> be the result of <a data-link-type=\"dfn\" href=\"https://webidl.spec.whatwg.org/#dfn-get-buffer-source-copy\" id=\"ref-for-dfn-get-buffer-source-copy\">getting a copy of the bytes held by the buffer source</a> <var>input</var>.</p>"
                    },
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑧\">key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-type\" id=\"ref-for-key-type①①\">type</a> <em>binary</em> and <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value⑨\">value</a> <var>bytes</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "If input is an Array exotic object",
                  "html": "",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>len</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑧\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-tolength\" id=\"ref-for-sec-tolength①\">ToLength</a>( <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions①⑨\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p④\">Get</a>(<var>input</var>,\n  \"<code>length</code>\")).</p>"
                    },
                    {
                      "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#set-append\" id=\"ref-for-set-append\">Append</a> <var>input</var> to <var>seen</var>.</p>"
                    },
                    {
                      "html": "<p>Let <var>keys</var> be a new empty list.</p>"
                    },
                    {
                      "html": "<p>Let <var>index</var> be 0.</p>"
                    },
                    {
                      "html": "While <var>index</var> is less than <var>len</var>:",
                      "rationale": "let",
                      "steps": [
                        {
                          "html": "<p>Let <var>hop</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②⓪\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-hasownproperty\" id=\"ref-for-sec-hasownproperty③\">HasOwnProperty</a>(<var>input</var>, <var>index</var>).</p>"
                        },
                        {
                          "html": "<p>If <var>hop</var> is false, return invalid.</p>"
                        },
                        {
                          "html": "<p>Let <var>entry</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②①\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑤\">Get</a>(<var>input</var>, <var>index</var>).</p>"
                        },
                        {
                          "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑤\">converting a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-returnifabrupt\" id=\"ref-for-sec-returnifabrupt\">ReturnIfAbrupt</a>(<var>key</var>).</p>"
                        },
                        {
                          "html": "<p>If <var>key</var> is invalid abort these steps and return\n  invalid.</p>"
                        },
                        {
                          "html": "<p><a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append①\">Append</a> <var>key</var> to <var>keys</var>.</p>"
                        },
                        {
                          "html": "<p>Increase <var>index</var> by 1.</p>"
                        }
                      ]
                    },
                    {
                      "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key①①\">array key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①⓪\">value</a> <var>keys</var>.</p>"
                    }
                  ]
                },
                {
                  "case": "Otherwise",
                  "html": "<p>Return invalid.</p>"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "name": "convert a value to a multiEntry key",
      "href": "https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-multientry-key",
      "html": "To <dfn class=\"dfn-paneled has-dfn-panel\" data-dfn-type=\"dfn\" data-noexport=\"\" id=\"convert-a-value-to-a-multientry-key\" role=\"button\" aria-expanded=\"false\" tabindex=\"0\">convert a value to a multiEntry key</dfn> with an ECMAScript value <var>input</var>, run the following steps.\nThe result of these steps is a <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key\" id=\"ref-for-key⑨⑨\">key</a> or invalid, or the\nsteps may throw an exception.",
      "rationale": ".algorithm",
      "steps": [
        {
          "html": "If <var>input</var> is an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ordinary-and-exotic-objects-behaviours.html#array-exotic-object\" id=\"ref-for-array-exotic-object①\">Array exotic object</a>, then:",
          "rationale": "let",
          "steps": [
            {
              "html": "<p>Let <var>len</var> be <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②②\">?</a> ToLength( <a data-link-type=\"dfn\" href=\"https://tc39.github.io/ecma262/#sec-algorithm-conventions\" id=\"ref-for-sec-algorithm-conventions②③\">?</a> <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑥\">Get</a>(<var>input</var>, \"<code>length</code>\")).</p>"
            },
            {
              "html": "<p>Let <var>seen</var> be a new <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#ordered-set\" id=\"ref-for-ordered-set⑥\">set</a> containing only <var>input</var>.</p>"
            },
            {
              "html": "<p>Let <var>keys</var> be a new empty <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list\" id=\"ref-for-list①②\">list</a>.</p>"
            },
            {
              "html": "<p>Let <var>index</var> be 0.</p>"
            },
            {
              "html": "While <var>index</var> is less than <var>len</var>:",
              "rationale": "let",
              "steps": [
                {
                  "html": "<p>Let <var>entry</var> be <a data-link-type=\"abstract-op\" href=\"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-get-o-p\" id=\"ref-for-sec-get-o-p⑦\">Get</a>(<var>input</var>, <var>index</var>).</p>"
                },
                {
                  "html": "If <var>entry</var> is not an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type⑤\">abrupt completion</a>, then:",
                  "rationale": "let",
                  "steps": [
                    {
                      "html": "<p>Let <var>key</var> be the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑥\">converting a value to a key</a> with arguments <var>entry</var> and <var>seen</var>.</p>"
                    },
                    {
                      "html": "<p>If <var>key</var> is not invalid or an <a data-link-type=\"dfn\" href=\"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-completion-record-specification-type\" id=\"ref-for-sec-completion-record-specification-type⑥\">abrupt completion</a>,\n and there is no <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-item\" id=\"ref-for-list-item③\">item</a> in <var>keys</var> <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#equal-to\" id=\"ref-for-equal-to②⑤\">equal to</a> <var>key</var>,\n then <a data-link-type=\"dfn\" href=\"https://infra.spec.whatwg.org/#list-append\" id=\"ref-for-list-append②\">append</a> <var>key</var> to <var>keys</var>.</p>"
                    }
                  ]
                },
                {
                  "html": "<p>Increase <var>index</var> by 1.</p>"
                }
              ]
            },
            {
              "html": "<p>Return a new <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#array-key\" id=\"ref-for-array-key①②\">array key</a> with <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#key-value\" id=\"ref-for-key-value①①\">value</a> set to <var>keys</var>.</p>"
            }
          ]
        },
        {
          "html": "<p>Otherwise, return the result of <a data-link-type=\"dfn\" href=\"https://www.w3.org/TR/IndexedDB-3/#convert-a-value-to-a-key\" id=\"ref-for-convert-a-value-to-a-key①⑦\">converting a value to a key</a> with argument <var>input</var>.\nRethrow any exceptions.</p>"
        }
      ]
    }
  ]
}